{"componentChunkName":"component---src-templates-doc-js","path":"/docs/main/core/graphql/","result":{"pageContext":{"html":"<h1 id=\"graphql-support\" style=\"position:relative;\"><a href=\"#graphql-support\" aria-label=\"graphql support permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQL Support</h1>\n<p><a href=\"https://graphql.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GraphQL</a> is a query language made to communicate with an API and therefore is an alternative to REST.</p>\n<p>It has some advantages compared to REST: it solves the over-fetching or under-fetching of data, is strongly typed, and is capable of retrieving multiple and nested data in one go, but it also comes with drawbacks. For example it creates overhead depending on the request.</p>\n<p>API Platform creates a REST API by default. But you can choose to enable GraphQL as well.</p>\n<p>Once enabled, you have nothing to do: your schema describing your API is automatically built and your GraphQL endpoint is ready to go!</p>\n<h2 id=\"enabling-graphql\" style=\"position:relative;\"><a href=\"#enabling-graphql\" aria-label=\"enabling graphql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enabling GraphQL</h2>\n<p>To enable GraphQL and its IDE (GraphiQL and GraphQL Playground) in your API, simply require the <a href=\"https://webonyx.github.io/graphql-php/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">graphql-php</a> package using Composer and clear the cache one more time:</p>\n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">docker compose exec php sh -c &#39;\n    composer require webonyx/graphql-php\n    bin/console cache:clear\n&#39;</code></pre></div>\n<p>You can now use GraphQL at the endpoint: <code class=\"language-text\">https://localhost:8443/graphql</code>.</p>\n<p><em>Note:</em> If you used <a href=\"/docs/main/distribution/#using-symfony-flex-and-composer-advanced-users\">Symfony Flex to install API Platform</a>, URLs will be prefixed with <code class=\"language-text\">/api</code> by default. For example, the GraphQL endpoint will be: <code class=\"language-text\">https://localhost:8443/api/graphql</code>.</p>\n<h2 id=\"changing-location-of-the-graphql-endpoint\" style=\"position:relative;\"><a href=\"#changing-location-of-the-graphql-endpoint\" aria-label=\"changing location of the graphql endpoint permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Changing Location of the GraphQL Endpoint</h2>\n<p>Sometimes you may want to have the GraphQL endpoint at a different location. This can be done by manually configuring the GraphQL controller.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/routes.yaml</span>\n<span class=\"token key atrule\">api_graphql_entrypoint</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /api/graphql\n    <span class=\"token key atrule\">controller</span><span class=\"token punctuation\">:</span> api_platform.graphql.action.entrypoint\n<span class=\"token comment\"># ...</span></code></pre></div>\n<p>Change <code class=\"language-text\">/api/graphql</code> to the URI you wish the GraphQL endpoint to be accessible on.</p>\n<h2 id=\"graphiql\" style=\"position:relative;\"><a href=\"#graphiql\" aria-label=\"graphiql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphiQL</h2>\n<p>If Twig is installed in your project, go to the GraphQL endpoint with your browser. You will see a nice interface provided by GraphiQL to interact with your API.</p>\n<p>The GraphiQL IDE can also be found at <code class=\"language-text\">/graphql/graphiql</code>.</p>\n<p>If you need to disable it, it can be done in the configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/packages/api_platform.yaml</span>\n<span class=\"token key atrule\">api_platform</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">graphql</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">graphiql</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n<span class=\"token comment\"># ...</span></code></pre></div>\n<h3 id=\"add-another-location-for-graphiql\" style=\"position:relative;\"><a href=\"#add-another-location-for-graphiql\" aria-label=\"add another location for graphiql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add another Location for GraphiQL</h3>\n<p>If you want to add a different location besides <code class=\"language-text\">/graphql/graphiql</code>, you can do it like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># app/config/routes.yaml</span>\n<span class=\"token key atrule\">graphiql</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /docs/graphiql\n    <span class=\"token key atrule\">controller</span><span class=\"token punctuation\">:</span> api_platform.graphql.action.graphiql</code></pre></div>\n<h2 id=\"graphql-playground\" style=\"position:relative;\"><a href=\"#graphql-playground\" aria-label=\"graphql playground permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQL Playground</h2>\n<p>Another IDE is by default included in API Platform: GraphQL Playground.</p>\n<p>It can be found at <code class=\"language-text\">/graphql/graphql_playground</code>.</p>\n<p>You can disable it if you want in the configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/packages/api_platform.yaml</span>\n<span class=\"token key atrule\">api_platform</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">graphql</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">graphql_playground</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n<span class=\"token comment\"># ...</span></code></pre></div>\n<h3 id=\"add-another-location-for-graphql-playground\" style=\"position:relative;\"><a href=\"#add-another-location-for-graphql-playground\" aria-label=\"add another location for graphql playground permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Add another Location for GraphQL Playground</h3>\n<p>You can add a different location besides <code class=\"language-text\">/graphql/graphql_playground</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># app/config/routes.yaml</span>\n<span class=\"token key atrule\">graphql_playground</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /docs/graphql_playground\n    <span class=\"token key atrule\">controller</span><span class=\"token punctuation\">:</span> api_platform.graphql.action.graphql_playground</code></pre></div>\n<h2 id=\"modifying-or-disabling-the-default-ide\" style=\"position:relative;\"><a href=\"#modifying-or-disabling-the-default-ide\" aria-label=\"modifying or disabling the default ide permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Modifying or Disabling the Default IDE</h2>\n<p>When going to the GraphQL endpoint, you can choose to launch the IDE you want.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/packages/api_platform.yaml</span>\n<span class=\"token key atrule\">api_platform</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">graphql</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># Choose between graphiql or graphql-playground</span>\n        <span class=\"token key atrule\">default_ide</span><span class=\"token punctuation\">:</span> graphql<span class=\"token punctuation\">-</span>playground\n<span class=\"token comment\"># ...</span></code></pre></div>\n<p>You can also disable this feature by setting the configuration value to <code class=\"language-text\">false</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/packages/api_platform.yaml</span>\n<span class=\"token key atrule\">api_platform</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">graphql</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">default_ide</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n<span class=\"token comment\"># ...</span></code></pre></div>\n<h2 id=\"request-with-applicationgraphql-content-type\" style=\"position:relative;\"><a href=\"#request-with-applicationgraphql-content-type\" aria-label=\"request with applicationgraphql content type permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Request with <code class=\"language-text\">application/graphql</code> Content-Type</h2>\n<p>If you wish to send a <a href=\"https://graphql.org/learn/serving-over-http/#post-request\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">POST request using the <code class=\"language-text\">application/graphql</code> Content-Type</a>,\nyou need to enable it in the <a href=\"/docs/main/core/content-negotiation/#configuring-formats-globally\">allowed formats of API Platform</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/packages/api_platform.yaml</span>\n<span class=\"token key atrule\">api_platform</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">formats</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ...</span>\n        <span class=\"token key atrule\">graphql</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'application/graphql'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<h2 id=\"operations\" style=\"position:relative;\"><a href=\"#operations\" aria-label=\"operations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Operations</h2>\n<p>To understand what an operation is, please refer to the <a href=\"/docs/main/core/operations/\">operations documentation</a>.</p>\n<p>For GraphQL, the operations are defined by using the <code class=\"language-text\">Query</code>, <code class=\"language-text\">QueryCollection</code>, <code class=\"language-text\">Mutation</code> and <code class=\"language-text\">Subscription</code> attributes.</p>\n<p>By default, the following operations are enabled:</p>\n<ul>\n<li><code class=\"language-text\">Query</code></li>\n<li><code class=\"language-text\">QueryCollection</code></li>\n<li><code class=\"language-text\">Mutation(name: 'create')</code></li>\n<li><code class=\"language-text\">Mutation(name: 'update')</code></li>\n<li><code class=\"language-text\">Mutation(name: 'delete')</code></li>\n</ul>\n<p>You can of course disable or configure these operations.</p>\n<p>For instance, in the following example, only the query of an item and the create mutation are enabled:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h2 id=\"queries\" style=\"position:relative;\"><a href=\"#queries\" aria-label=\"queries permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Queries</h2>\n<p>If you don't know what queries are yet, please <a href=\"https://graphql.org/learn/queries/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">read the documentation about them</a>.</p>\n<p>For each resource, two queries are available: one for retrieving an item and the other one for the collection.\nFor example, if you have a <code class=\"language-text\">Book</code> resource, the queries <code class=\"language-text\">book</code> and <code class=\"language-text\">books</code> can be used.</p>\n<h3 id=\"global-object-identifier\" style=\"position:relative;\"><a href=\"#global-object-identifier\" aria-label=\"global object identifier permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Global Object Identifier</h3>\n<p>When querying an item, you need to pass an identifier as argument. Following the <a href=\"https://relay.dev/graphql/objectidentification.htm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GraphQL Global Object Identification Specification</a>,\nthe identifier needs to be globally unique. In API Platform, this argument is represented as an <a href=\"https://www.w3.org/TR/ld-glossary/#internationalized-resource-identifier\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">IRI (Internationalized Resource Identifier)</a>.</p>\n<p>For example, to query a book having as identifier <code class=\"language-text\">89</code>, you have to run the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">book</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/books/89\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">title</span>\n    <span class=\"token property\">isbn</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Note that in this example, we're retrieving two fields: <code class=\"language-text\">title</code> and <code class=\"language-text\">isbn</code>.</p>\n<h3 id=\"custom-queries\" style=\"position:relative;\"><a href=\"#custom-queries\" aria-label=\"custom queries permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom Queries</h3>\n<p>To create a custom query, first of all you need to create its resolver.</p>\n<p>If you want a custom query for a collection, create a class like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Resolver/BookCollectionResolver.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Resolver</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>QueryCollectionResolverInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity<span class=\"token punctuation\">\\</span>Book</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">BookCollectionResolver</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">QueryCollectionResolverInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * @param iterable&lt;Book> $collection\n     *\n     * @return iterable&lt;Book>\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__invoke</span><span class=\"token punctuation\">(</span><span class=\"token keyword type-hint\">iterable</span> <span class=\"token variable\">$collection</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">iterable</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Query arguments are in $context['args'].</span>\n\n        <span class=\"token keyword\">foreach</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$collection</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$book</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Do something with the book.</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$collection</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>If you use autoconfiguration (the default Symfony configuration) in your application, then you are done!</p>\n<p>Else, you need to tag your resolver like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/services.yaml</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span>\n    <span class=\"token key atrule\">App\\Resolver\\BookCollectionResolver</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> api_platform.graphql.query_resolver <span class=\"token punctuation\">}</span></code></pre></div>\n<p>The resolver for an item is very similar:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Resolver/BookResolver.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Resolver</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>QueryItemResolverInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity<span class=\"token punctuation\">\\</span>Book</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">BookResolver</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">QueryItemResolverInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * @param Book|null $item\n     *\n     * @return Book\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__invoke</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Query arguments are in $context['args'].</span>\n\n        <span class=\"token comment\">// Do something with the book.</span>\n        <span class=\"token comment\">// Or fetch the book if it has not been retrieved.</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Note that you will receive the retrieved item or not in this resolver depending on how you configure your query in your resource.</p>\n<p>Since the resolver is a service, you can inject some dependencies and fetch your item in the resolver if you want.</p>\n<p>If you don't use autoconfiguration, don't forget to tag your resolver with <code class=\"language-text\">api_platform.graphql.query_resolver</code>.</p>\n<p>Now that your resolver is created and registered, you can configure your custom query and link its resolver.</p>\n<p>In your resource, add the following:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>BookCollectionResolver</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>BookResolver</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'update'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'delete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'retrievedQuery'</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">BookResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span>\n        <span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'notRetrievedQuery'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">BookResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">args</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span>\n        <span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'withDefaultArgsNotRetrievedQuery'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">BookResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">read</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">false</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span>\n        <span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'withCustomArgsQuery'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">BookResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">args</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n            <span class=\"token string single-quoted-string\">'id'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'ID!'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n            <span class=\"token string single-quoted-string\">'log'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Boolean!'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'description'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Is logging activated?'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n            <span class=\"token string single-quoted-string\">'logDate'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'DateTime'</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'collectionQuery'</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">BookCollectionResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Note that you need to explicitly add the auto-generated queries and mutations if they are needed when configuring custom queries, like it's done for the <a href=\"#operations\">operations</a>.</p>\n<p>As you can see, it's possible to define your own arguments for your custom queries.\nThey are following the GraphQL type system.\nIf you don't define the <code class=\"language-text\">args</code> property, it will be the default ones (for example <code class=\"language-text\">id</code> for an item).</p>\n<p>If you don't want API Platform to retrieve the item for you, disable the <code class=\"language-text\">read</code> stage like in <code class=\"language-text\">withDefaultArgsNotRetrievedQuery</code>.\nSome other stages <a href=\"#disabling-resolver-stages\">can be disabled</a>.\nAnother option would be to make sure there is no <code class=\"language-text\">id</code> argument.\nThis is the case for <code class=\"language-text\">notRetrievedQuery</code> (empty args).\nConversely, if you need to add custom arguments, make sure <code class=\"language-text\">id</code> is added among the arguments if you need the item to be retrieved automatically.</p>\n<p>Note also that:</p>\n<ul>\n<li>If you have added your <a href=\"#custom-types\">own custom types</a>, you can use them directly for your arguments types (it's the case here for <code class=\"language-text\">DateTime</code>).</li>\n<li>You can also add a custom description for your custom arguments. You can see the <a href=\"https://webonyx.github.io/graphql-php/type-system/object-types/#field-arguments\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">field arguments documentation</a> for more options.</li>\n</ul>\n<p>The arguments you have defined or the default ones and their value will be in <code class=\"language-text\">$context['args']</code> of your resolvers.</p>\n<p>You custom queries will be available like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">retrievedQueryBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/books/56\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">title</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token object\">notRetrievedQueryBook</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">title</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token property-query\">withDefaultArgsNotRetrievedQueryBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/books/56\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">title</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token property-query\">withCustomArgsQueryBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/books/23\"</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">log</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">logDate</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2019-12-20\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">title</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token object\">collectionQueryBooks</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"mutations\" style=\"position:relative;\"><a href=\"#mutations\" aria-label=\"mutations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Mutations</h2>\n<p>If you don't know what mutations are yet, the documentation about them is <a href=\"https://graphql.org/learn/queries/#mutations\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">here</a>.</p>\n<p>For each resource, three mutations are available: one for creating it (<code class=\"language-text\">create</code>), one for updating it (<code class=\"language-text\">update</code>) and one for deleting it (<code class=\"language-text\">delete</code>).</p>\n<p>When updating or deleting a resource, you need to pass the <strong>IRI</strong> of the resource as argument. See <a href=\"#global-object-identifier\">Global Object Identifier</a> for more information.</p>\n<h3 id=\"client-mutation-id\" style=\"position:relative;\"><a href=\"#client-mutation-id\" aria-label=\"client mutation id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Client Mutation ID</h3>\n<p>Following the <a href=\"https://github.com/facebook/relay/blob/v7.1.0/website/spec/Mutations.md#relay-input-object-mutations-specification\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Relay Input Object Mutations Specification</a>,\nyou can pass a <code class=\"language-text\">clientMutationId</code> as argument and can ask its value as a field.</p>\n<p>For example, if you delete a book:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token definition-mutation function\">DeleteBook</span><span class=\"token punctuation\">(</span><span class=\"token variable variable-input\">$id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token variable variable-input\">$clientMutationId</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query property-mutation\">deleteBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token variable variable-input\">$id</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">clientMutationId</span><span class=\"token punctuation\">:</span> <span class=\"token variable variable-input\">$clientMutationId</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">clientMutationId</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"custom-mutations\" style=\"position:relative;\"><a href=\"#custom-mutations\" aria-label=\"custom mutations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom Mutations</h3>\n<p>Creating custom mutations is comparable to creating <a href=\"#custom-queries\">custom queries</a>.</p>\n<p>Create your resolver:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Resolver/BookMutationResolver.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Resolver</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>MutationResolverInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity<span class=\"token punctuation\">\\</span>Book</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">BookMutationResolver</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MutationResolverInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * @param Book|null $item\n     *\n     * @return Book\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__invoke</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Mutation input arguments are in $context['args']['input'].</span>\n\n        <span class=\"token comment\">// Do something with the book.</span>\n        <span class=\"token comment\">// Or fetch the book if it has not been retrieved.</span>\n\n        <span class=\"token comment\">// The returned item will pe persisted.</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$item</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>As you can see, depending on how you configure your custom mutation in the resource, the item is retrieved or not.\nFor instance, if you don't set an <code class=\"language-text\">id</code> argument or if you disable the <code class=\"language-text\">read</code> or the <code class=\"language-text\">deserialize</code> stage (other stages <a href=\"#disabling-resolver-stages\">can also be disabled</a>),\nthe received item will be <code class=\"language-text\">null</code>.</p>\n<p>Likewise, if you don't want your item to be persisted by API Platform,\nyou can return <code class=\"language-text\">null</code> instead of the mutated item (be careful: the response will also be <code class=\"language-text\">null</code>) or disable the <code class=\"language-text\">write</code> stage.</p>\n<p>Don't forget the resolver is a service and you can inject the dependencies you want.</p>\n<p>If you don't use autoconfiguration, add the tag <code class=\"language-text\">api_platform.graphql.mutation_resolver</code> to the resolver service.</p>\n<p>Now in your resource:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>BookMutationResolver</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'update'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'delete'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'mutation'</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">BookMutationResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span>\n            <span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'withCustomArgsMutation'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">BookMutationResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span>\n            <span class=\"token attribute-class-name class-name\">args</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string single-quoted-string\">'sendMail'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string single-quoted-string\">'type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Boolean!'</span><span class=\"token punctuation\">,</span> \n                    <span class=\"token string single-quoted-string\">'description'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Send a mail?'</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span>\n            <span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'disabledStagesMutation'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">BookMutationResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span>\n            <span class=\"token attribute-class-name class-name\">deserialize</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">false</span><span class=\"token punctuation\">,</span> \n            <span class=\"token attribute-class-name class-name\">write</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">false</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Note that you need to explicitly add the auto-generated queries and mutations if they are needed when configuring custom mutations, like it's done for the <a href=\"#operations\">operations</a>.</p>\n<p>As the custom queries, you can define your own arguments if you don't want to use the default ones (extracted from your resource).\nThe only difference with them is that, even if you define your own arguments, the <code class=\"language-text\">clientMutationId</code> will always be set.</p>\n<p>The arguments will be in <code class=\"language-text\">$context['args']['input']</code> of your resolvers.</p>\n<p>Your custom mutations will be available like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property-query property-mutation\">mutationBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/books/18\"</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"The Fitz and the Fool\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">book</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property-query property-mutation\">withCustomArgsMutationBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">sendMail</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">clientMutationId</span><span class=\"token punctuation\">:</span> \"<span class=\"token property\">myId</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">book</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token property\">clientMutationId</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property-query property-mutation\">disabledStagesMutationBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/books/18\"</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"The Fitz and the Fool\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">book</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token property\">clientMutationId</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"subscriptions\" style=\"position:relative;\"><a href=\"#subscriptions\" aria-label=\"subscriptions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscriptions</h2>\n<p>Subscriptions are an <a href=\"https://github.com/graphql/graphql-spec/blob/master/rfcs/Subscriptions.md#rfc-graphql-subscriptions\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RFC</a> to allow a client to receive pushed realtime data from the server.</p>\n<p>In API Platform, the built-in subscription support is handled by using <a href=\"https://mercure.rocks/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Mercure</a> as its underlying protocol.</p>\n<h3 id=\"enable-update-subscriptions-for-a-resource\" style=\"position:relative;\"><a href=\"#enable-update-subscriptions-for-a-resource\" aria-label=\"enable update subscriptions for a resource permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enable Update Subscriptions for a Resource</h3>\n<p>To enable update subscriptions for a resource, these conditions have to be met:</p>\n<ul>\n<li>the <a href=\"/docs/main/core/mercure/#installing-mercure-support\">Mercure hub and bundle need to be installed and configured</a>.</li>\n<li>Mercure needs to be enabled for the resource.</li>\n<li>the <code class=\"language-text\">update</code> mutation needs to be enabled for the resource.</li>\n<li>the subscription needs to be enabled for the resource.</li>\n</ul>\n<p>For instance, your resource should look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Subscription</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">mercure</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">true</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'update'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Subscription</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h3 id=\"subscribe\" style=\"position:relative;\"><a href=\"#subscribe\" aria-label=\"subscribe permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscribe</h3>\n<p>Doing a subscription is very similar to doing a query:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">subscription</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property-query\">updateBookSubscribe</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/books/1\"</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">clientSubscriptionId</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"myId\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">book</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n        <span class=\"token property\">isbn</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token property\">mercureUrl</span>\n      <span class=\"token property\">clientSubscriptionId</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>As you can see, you need to pass the <strong>IRI</strong> of the resource as argument. See <a href=\"#global-object-identifier\">Global Object Identifier</a> for more information.</p>\n<p>You can also pass <code class=\"language-text\">clientSubscriptionId</code> as argument and can ask its value as a field.</p>\n<p>In the payload of the subscription, the given fields of the resource will be the fields you subscribe to: if any of these fields is updated, you will be pushed their updated values.</p>\n<p>The <code class=\"language-text\">mercureUrl</code> field is the Mercure URL you need to use to <a href=\"https://mercure.rocks/docs/getting-started#subscribing\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">subscribe to the updates</a> on the client-side.</p>\n<h3 id=\"receiving-an-update\" style=\"position:relative;\"><a href=\"#receiving-an-update\" aria-label=\"receiving an update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Receiving an Update</h3>\n<p>On the client side, you will receive the pushed updated data like you would receive the updated data if you did an <code class=\"language-text\">update</code> mutation.</p>\n<p>For instance, you could receive a JSON payload like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"book\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Updated title\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"isbn\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"978-6-6344-4051-1\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"subscriptions-cache\" style=\"position:relative;\"><a href=\"#subscriptions-cache\" aria-label=\"subscriptions cache permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Subscriptions Cache</h3>\n<p>Internally, API Platform stores the subscriptions in a cache, using the <a href=\"https://symfony.com/doc/current/cache.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Symfony Cache</a>.</p>\n<p>The cache is named <code class=\"language-text\">api_platform.graphql.cache.subscription</code> and the subscription keys are generated from the subscription payload by using a SHA-256 hash.</p>\n<p>It's recommended to use an adapter like Redis for this cache.</p>\n<h2 id=\"workflow-of-the-resolvers\" style=\"position:relative;\"><a href=\"#workflow-of-the-resolvers\" aria-label=\"workflow of the resolvers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Workflow of the Resolvers</h2>\n<p>API Platform resolves the queries and mutations by using its own <strong>resolvers</strong>.</p>\n<p>Even if you create your <a href=\"#custom-queries\">custom queries</a> or your <a href=\"#custom-mutations\">custom mutations</a>,\nthese resolvers will be used and yours will be called at the right time.</p>\n<p>Each resolver follows a workflow composed of <strong>stages</strong>.</p>\n<p>The schema below describes them:</p>\n<p><img src=\"/677443f6df3ed0cabf1509ddf87209cc/resolvers-workflow.svg\" alt=\"Resolvers Workflow\"></p>\n<p>Each stage corresponds to a service. It means you can take control of the workflow wherever you want by decorating them!</p>\n<p>Here is an example of the decoration of the write stage, for instance if you want to persist your data as you want.</p>\n<p>Create your <em>WriteStage</em>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Stage</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>Stage<span class=\"token punctuation\">\\</span>WriteStageInterface</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">WriteStage</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">WriteStageInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$writeStage</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">WriteStageInterface</span> <span class=\"token variable\">$writeStage</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">writeStage</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$writeStage</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__invoke</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$resourceClass</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$operationName</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// You can add pre-write code here.</span>\n\n        <span class=\"token comment\">// Call the decorated write stage (this syntax calls the __invoke method).</span>\n        <span class=\"token variable\">$writtenObject</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">writeStage</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$resourceClass</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$operationName</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// You can add post-write code here.</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$writtenObject</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Decorate the API Platform stage service:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/services.yaml</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span>\n    <span class=\"token key atrule\">'App\\Stage\\WriteStage'</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">decorates</span><span class=\"token punctuation\">:</span> api_platform.graphql.resolver.stage.write</code></pre></div>\n<h3 id=\"disabling-resolver-stages\" style=\"position:relative;\"><a href=\"#disabling-resolver-stages\" aria-label=\"disabling resolver stages permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disabling Resolver Stages</h3>\n<p>If you need to, you can disable some stages done by the resolvers, for instance if you don't want your data to be validated.</p>\n<p>The following table lists the stages you can disable in your resource configuration.</p>\n<table>\n<thead>\n<tr>\n<th>Attribute</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code class=\"language-text\">read</code></td>\n<td><code class=\"language-text\">bool</code></td>\n<td><code class=\"language-text\">true</code></td>\n<td>Enables or disables the reading of data</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">deserialize</code></td>\n<td><code class=\"language-text\">bool</code></td>\n<td><code class=\"language-text\">true</code></td>\n<td>Enables or disables the deserialization of data (mutation only)</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">validate</code></td>\n<td><code class=\"language-text\">bool</code></td>\n<td><code class=\"language-text\">true</code></td>\n<td>Enables or disables the validation of the denormalized data (mutation only)</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">write</code></td>\n<td><code class=\"language-text\">bool</code></td>\n<td><code class=\"language-text\">true</code></td>\n<td>Enables or disables the writing of data into the persistence system (mutation only)</td>\n</tr>\n<tr>\n<td><code class=\"language-text\">serialize</code></td>\n<td><code class=\"language-text\">bool</code></td>\n<td><code class=\"language-text\">true</code></td>\n<td>Enables or disables the serialization of data</td>\n</tr>\n</tbody>\n</table>\n<p>A stage can be disabled at the operation level:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">write</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">false</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Or at the resource attributes level (will be also applied in REST and for all operations):</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">write</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">false</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h2 id=\"events\" style=\"position:relative;\"><a href=\"#events\" aria-label=\"events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Events</h2>\n<p>No events are sent by the resolvers in API Platform. If you want to add your custom logic, <a href=\"#workflow-of-the-resolvers\">decorating the stages</a> is\nthe recommended way to do it.</p>\n<p>However, if you really want to use events, you can by installing a <a href=\"https://github.com/alanpoulain/ApiPlatformEventsBundle\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">bundle dispatching events before and after the stages</a>.</p>\n<h2 id=\"filters\" style=\"position:relative;\"><a href=\"#filters\" aria-label=\"filters permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Filters</h2>\n<p>Filters are supported out-of-the-box. Follow the <a href=\"/docs/main/core/filters/\">filters</a> documentation and your filters will be available as arguments of queries.</p>\n<p>However you don't necessarily have the same needs for your GraphQL endpoint as for your REST one.</p>\n<p>In the <code class=\"language-text\">QueryCollection</code> attribute, you can choose to decorrelate the GraphQL filters.\nIn order to keep the default behavior (possibility to fetch, delete, update or create), define all the auto-generated operations (<code class=\"language-text\">Query</code> ,<code class=\"language-text\">QueryCollection</code>, and the <code class=\"language-text\">delete</code>, <code class=\"language-text\">update</code> and <code class=\"language-text\">create</code> <code class=\"language-text\">Mutation</code>).</p>\n<p>For example, this entity will have a search filter for REST and a date filter for GraphQL:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Offer.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">filters</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'offer.search_filter'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">filters</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'offer.date_filter'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'update'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'delete'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Offer</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h3 id=\"syntax-for-filters-with-a-list-of-key--value-arguments\" style=\"position:relative;\"><a href=\"#syntax-for-filters-with-a-list-of-key--value-arguments\" aria-label=\"syntax for filters with a list of key  value arguments permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Syntax for Filters with a List of Key / Value Arguments</h3>\n<p>Some filters like the <a href=\"/docs/main/core/filters/#exists-filter\">exists filter</a> or the <a href=\"/docs/main/core/filters/#order-filter-sorting\">order filter</a> take a list of key / value as arguments.</p>\n<p>The first syntax coming to mind to use them is to write:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">order</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ASC\"</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"DESC\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">id</span>\n        <span class=\"token property\">name</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>However this syntax has a problematic issue: it doesn't keep the order of the arguments.\nThese filters usually need a proper order to give results as expected.</p>\n<p>That's why this syntax needs to be used instead:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">order</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"ASC\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"DESC\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">id</span>\n        <span class=\"token property\">name</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Since a list is used for the arguments, the order is preserved.</p>\n<h3 id=\"filtering-on-nested-properties\" style=\"position:relative;\"><a href=\"#filtering-on-nested-properties\" aria-label=\"filtering on nested properties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Filtering on Nested Properties</h3>\n<p>Unlike for REST, all built-in filters support nested properties using the underscore (<code class=\"language-text\">_</code>) syntax instead of the dot (<code class=\"language-text\">.</code>) syntax, e.g.:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Offer.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiFilter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Doctrine<span class=\"token punctuation\">\\</span>Orm<span class=\"token punctuation\">\\</span>Filter<span class=\"token punctuation\">\\</span>OrderFilter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Doctrine<span class=\"token punctuation\">\\</span>Orm<span class=\"token punctuation\">\\</span>Filter<span class=\"token punctuation\">\\</span>SearchFilter</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiFilter</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">OrderFilter</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">properties</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'product.releaseDate'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiFilter</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">SearchFilter</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">properties</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'product.color'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'exact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Offer</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>The above allows you to find offers by their respective product's color like for the REST Api.\nYou can then filter using the following syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">product_color</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">id</span>\n        <span class=\"token object\">product</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">name</span>\n          <span class=\"token property\">color</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Or order your results like:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">order</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span><span class=\"token attr-name\">product_releaseDate</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"DESC\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">id</span>\n        <span class=\"token object\">product</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">name</span>\n          <span class=\"token property\">color</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Another difference with the REST API filters is that the keyword <code class=\"language-text\">_list</code> must be used instead of the traditional <code class=\"language-text\">[]</code> to filter over multiple values.</p>\n<p>For example, if you want to search the offers with a green or a red product you can use the following syntax:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">product_color_list</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">id</span>\n        <span class=\"token object\">product</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">name</span>\n          <span class=\"token property\">color</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"pagination\" style=\"position:relative;\"><a href=\"#pagination\" aria-label=\"pagination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Pagination</h2>\n<p>API Platform natively enables a cursor-based pagination for collections.\nIt supports <a href=\"https://graphql.org/learn/pagination/#complete-connection-model\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GraphQL's Complete Connection Model</a> and is compatible with <a href=\"https://relay.dev/graphql/connections.htm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GraphQL Cursor Connections Specification</a>.</p>\n<p>A page-based pagination can also be enabled per resource or per operation.</p>\n<h3 id=\"using-the-cursor-based-pagination\" style=\"position:relative;\"><a href=\"#using-the-cursor-based-pagination\" aria-label=\"using the cursor based pagination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the Cursor-based Pagination</h3>\n<p>Here is an example query leveraging the pagination system:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">first</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">after</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"cursor\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">totalCount</span>\n    <span class=\"token object\">pageInfo</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">endCursor</span>\n      <span class=\"token property\">hasNextPage</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">cursor</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">id</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Two pairs of parameters work with the query:</p>\n<ul>\n<li><code class=\"language-text\">first</code> and <code class=\"language-text\">after</code>;</li>\n<li><code class=\"language-text\">last</code> and <code class=\"language-text\">before</code>.</li>\n</ul>\n<p>More precisely:</p>\n<ul>\n<li><code class=\"language-text\">first</code> corresponds to the items per page starting from the beginning;</li>\n<li><code class=\"language-text\">after</code> corresponds to the <code class=\"language-text\">cursor</code> from which the items are returned.</li>\n<li><code class=\"language-text\">last</code> corresponds to the items per page starting from the end;</li>\n<li><code class=\"language-text\">before</code> corresponds to the <code class=\"language-text\">cursor</code> from which the items are returned, from a backwards point of view.</li>\n</ul>\n<p>The current page always has a <code class=\"language-text\">startCursor</code> and an <code class=\"language-text\">endCursor</code>, present in the <code class=\"language-text\">pageInfo</code> field.</p>\n<p>To get the next page, you would add the <code class=\"language-text\">endCursor</code> from the current page as the <code class=\"language-text\">after</code> parameter.</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">first</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">after</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"endCursor\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>For the previous page, you would add the <code class=\"language-text\">startCursor</code> from the current page as the <code class=\"language-text\">before</code> parameter.</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">last</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">before</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"startCursor\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>How do you know when you have reached the last page? It is the aim of the property <code class=\"language-text\">hasNextPage</code> or <code class=\"language-text\">hasPreviousPage</code> in <code class=\"language-text\">pageInfo</code>.\nWhen it is false, you know it is the last page and moving forward or backward will give you an empty result.</p>\n<h3 id=\"using-the-page-based-pagination\" style=\"position:relative;\"><a href=\"#using-the-page-based-pagination\" aria-label=\"using the page based pagination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the Page-based Pagination</h3>\n<p>In order to use the page-based pagination, you need to enable it in the resource.</p>\n<p>For instance at the operation level:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Offer.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">paginationType</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'page'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'update'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'delete'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Offer</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Or if you want to do it at the resource level:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Offer.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">paginationType</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'page'</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Offer</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Once enabled, a <code class=\"language-text\">page</code> filter will be available in the collection query (its name <a href=\"/docs/main/core/pagination/\">can be changed in the configuration</a>) and an <code class=\"language-text\">itemsPerPage</code> filter will be available too if <a href=\"/docs/main/core/pagination/#client-side\">client-side-pagination</a> is enabled.</p>\n<p>A <code class=\"language-text\">paginationInfo</code> field can be queried to obtain the following information:</p>\n<ul>\n<li><code class=\"language-text\">itemsPerPage</code>: the number of items per page. To change it, follow the <a href=\"/docs/main/core/pagination/#changing-the-number-of-items-per-page\">pagination documentation</a>.</li>\n<li><code class=\"language-text\">lastPage</code>: the last page of the collection.</li>\n<li><code class=\"language-text\">totalCount</code>: the total number of items in the collection.</li>\n</ul>\n<p>The collection items data are available in the <code class=\"language-text\">collection</code> field.</p>\n<p>An example of a query:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">offers</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">page</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">itemsPerPage</span><span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">collection</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">id</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token object\">paginationInfo</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">itemsPerPage</span>\n      <span class=\"token property\">lastPage</span>\n      <span class=\"token property\">totalCount</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"disabling-the-pagination\" style=\"position:relative;\"><a href=\"#disabling-the-pagination\" aria-label=\"disabling the pagination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Disabling the Pagination</h3>\n<p>See also the <a href=\"/docs/main/core/pagination/#disabling-the-pagination\">pagination documentation</a>.</p>\n<h4 id=\"globally\" style=\"position:relative;\"><a href=\"#globally\" aria-label=\"globally permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Globally</h4>\n<p>The pagination can be disabled for all GraphQL resources using this configuration:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/packages/api_platform.yaml</span>\n<span class=\"token key atrule\">api_platform</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">graphql</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">collection</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">pagination</span><span class=\"token punctuation\">:</span>\n                <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<h4 id=\"for-a-specific-resource\" style=\"position:relative;\"><a href=\"#for-a-specific-resource\" aria-label=\"for a specific resource permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For a Specific Resource</h4>\n<p>It can also be disabled for a specific resource (REST and GraphQL):</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">paginationEnabled</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">false</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h4 id=\"for-a-specific-resource-collection-operation\" style=\"position:relative;\"><a href=\"#for-a-specific-resource-collection-operation\" aria-label=\"for a specific resource collection operation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For a Specific Resource Collection Operation</h4>\n<p>You can also disable the pagination for a specific collection operation:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">paginationEnabled</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h3 id=\"partial-pagination\" style=\"position:relative;\"><a href=\"#partial-pagination\" aria-label=\"partial pagination permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Partial Pagination</h3>\n<p><a href=\"/docs/main/core/pagination/#partial-pagination\">Partial pagination</a> is possible with GraphQL.</p>\n<p>When enabled, backwards pagination will not be possible, and the <code class=\"language-text\">hasNextPage</code> information will be always <code class=\"language-text\">false</code>.</p>\n<h2 id=\"security\" style=\"position:relative;\"><a href=\"#security\" aria-label=\"security permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Security</h2>\n<p>To add a security layer to your queries and mutations, follow the <a href=\"/docs/main/core/security/\">security</a> documentation.</p>\n<p>The REST security configuration and the GraphQL one are <strong>not</strong> correlated.</p>\n<p>If you have only some parts differing between REST and GraphQL, you have to redefine the common parts anyway.</p>\n<p>In the example below, we want the same security rules as we have in REST, but we also want to allow an admin to delete a book only in GraphQL.\nPlease note that, it's not possible to update a book in GraphQL because the <code class=\"language-text\">update</code> operation is not defined.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>Get</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>Post</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"is_granted('ROLE_USER')\"</span><span class=\"token punctuation\">,</span> \n    <span class=\"token attribute-class-name class-name\">operations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Get</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"is_granted('ROLE_USER') and object.owner == user\"</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">securityMessage</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'Sorry, but you are not the book owner.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Post</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"is_granted('ROLE_ADMIN')\"</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">securityMessage</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'Only admins can add books.'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"is_granted('ROLE_USER') and object.owner == user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"is_granted('ROLE_ADMIN')\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'delete'</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"is_granted('ROLE_ADMIN')\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string double-quoted-string\">\"is_granted('ROLE_ADMIN')\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h3 id=\"securing-properties-including-associations\" style=\"position:relative;\"><a href=\"#securing-properties-including-associations\" aria-label=\"securing properties including associations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Securing Properties (Including Associations)</h3>\n<p>You may want to limit access to certain resource properties with a security expression. This can be done with the <code class=\"language-text\">ApiProperty</code> <code class=\"language-text\">security</code> attribute.</p>\n<p>Note: adding the <code class=\"language-text\">ApiProperty</code> <code class=\"language-text\">security</code> expression to a GraphQL property will automatically make the GraphQL property type nullable (if it wasn't already).\nThis is because <code class=\"language-text\">null</code> is returned as the property value if access is denied via the <code class=\"language-text\">security</code> expression.</p>\n<p>In GraphQL, it's possible to expose associations - allowing nested querying.\nFor example, associations can be made with Doctrine ORM's <code class=\"language-text\">OneToMany</code>, <code class=\"language-text\">ManyToOne</code>, <code class=\"language-text\">ManyToMany</code>, etc.</p>\n<p>It's important to note that the security defined on resource operations applies only to the exposed query/mutation endpoints (e.g. <code class=\"language-text\">Query.users</code>, <code class=\"language-text\">Mutation.updateUser</code>, etc.).\nResource operation security is defined via the <code class=\"language-text\">security</code> attribute for each operation defined on the resource.\nThis security is <em>not</em> applied to exposed associations.</p>\n<p>Associations can instead be secured with the <code class=\"language-text\">ApiProperty</code> <code class=\"language-text\">security</code> attribute. This provides the flexibility to have different security depending on where an association is exposed.</p>\n<p>To prevent traversal attacks, you should ensure that any exposed associations are secured appropriately.\nA traversal attack is where a user can gain unintended access to a resource by querying nested associations, gaining access to a resource that prevents direct access (via the query endpoint).\nFor example, a user may be denied using <code class=\"language-text\">Query.getUser</code> to get a user, but is able to access the user through an association on an object that they do have access to (e.g. <code class=\"language-text\">document.createdBy</code>).</p>\n<p>The following example shows how associations can be secured:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/User.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiProperty</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Doctrine<span class=\"token punctuation\">\\</span>ORM<span class=\"token punctuation\">\\</span>Mapping</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">ORM</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @ORM\\Entity\n */</span>\n <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'is_granted(\"VIEW\", object)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'is_granted(\"ROLE_ADMIN\")'</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">User</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token comment\">/**\n     * @ORM\\ManyToMany(targetEntity=Document::class, mappedBy=\"viewers\")\n     */</span>\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiProperty</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'is_granted(\"VIEW\", object)'</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name type-declaration\">Collection</span> <span class=\"token variable\">$viewableDocuments</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">/**\n     * @ORM\\Column(type=\"string\", length=180, unique=true)\n     */</span>\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiProperty</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'is_granted(\"ROLE_ADMIN\")'</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword type-declaration\">string</span> <span class=\"token variable\">$email</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Document.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiProperty</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Doctrine<span class=\"token punctuation\">\\</span>ORM<span class=\"token punctuation\">\\</span>Mapping</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">ORM</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @ORM\\Entity\n */</span>\n <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'is_granted(\"VIEW\", object)'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'is_granted(\"ROLE_ADMIN\")'</span><span class=\"token punctuation\">)</span>\n <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Document</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token comment\">/**\n     * @ORM\\ManyToMany(targetEntity=User::class, inversedBy=\"viewableDocuments\")\n     */</span>\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiProperty</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'is_granted(\"VIEW\", object)'</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name type-declaration\">Collection</span> <span class=\"token variable\">$viewers</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * @ORM\\ManyToOne(targetEntity=User::class)\n     */</span>\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiProperty</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">security</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'is_granted(\"VIEW\", object)'</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">protected</span> <span class=\"token operator\">?</span><span class=\"token class-name type-declaration\">User</span> <span class=\"token variable\">$createdBy</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>The above example only allows admins to see the full collection of each resource (<code class=\"language-text\">QueryCollection</code>).\nUsers must be granted the <code class=\"language-text\">VIEW</code> attribute on a resource to be able to query it directly (<code class=\"language-text\">Query</code>) - which would use a <code class=\"language-text\">Voter</code> to make this decision.</p>\n<p>Similar to <code class=\"language-text\">Query</code>, all associations are secured, requiring <code class=\"language-text\">VIEW</code> access on the parent object (<em>not</em> on the association).\nThis means that a user with <code class=\"language-text\">VIEW</code> access to a <code class=\"language-text\">Document</code> is able to see all users who are in the <code class=\"language-text\">viewers</code> collection, as well as the <code class=\"language-text\">createdBy</code> association.\nThis may be a little too open, so you could instead do a role check here to only allow admins to access these fields, or check for a different attribute that could be implemented in the voter (e.g. <code class=\"language-text\">VIEW_CREATED_BY</code>.)\nAlternatively, you could still expose the users, but limit the visible fields by limiting access with <code class=\"language-text\">ApiProperty</code> <code class=\"language-text\">security</code> (such as the <code class=\"language-text\">User::$email</code> property above) or with <a href=\"/docs/main/core/serialization/#changing-the-serialization-context-dynamically\">dynamic serializer groups</a>.</p>\n<h2 id=\"serialization-groups\" style=\"position:relative;\"><a href=\"#serialization-groups\" aria-label=\"serialization groups permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Serialization Groups</h2>\n<p>You may want to restrict some resource's attributes to your GraphQL clients.</p>\n<p>As described in the <a href=\"/docs/main/core/serialization/\">serialization process</a> documentation, you can use serialization groups to expose only the attributes you want in queries or in mutations.</p>\n<p>If the (de)normalization context between GraphQL and REST is different, use the <code class=\"language-text\">(de)normalizationContext</code> key to change it in each query and mutations.</p>\n<p>Note that:</p>\n<ul>\n<li>A <strong>query</strong> is only using the normalization context.</li>\n<li>A <strong>mutation</strong> is using the denormalization context for its input and the normalization context for its output.</li>\n</ul>\n<p>The following example shows you what can be done:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Query</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>QueryCollection</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Serializer<span class=\"token punctuation\">\\</span>Annotation<span class=\"token punctuation\">\\</span>Groups</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attribute-class-name class-name\">normalizationContext</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'read'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n    <span class=\"token attribute-class-name class-name\">denormalizationContext</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'write'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Query</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">normalizationContext</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'query'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">QueryCollection</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">normalizationContext</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'query_collection'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span>\n            <span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token attribute-class-name class-name\">normalizationContext</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'query_collection'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token attribute-class-name class-name\">denormalizationContext</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'mutation'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">Groups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'read'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'write'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'query'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'query_collection'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$title</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">Groups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'read'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'mutation'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'query'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$author</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>In this case, the REST endpoint will be able to get the two attributes of the book and to modify only its title.</p>\n<p>The GraphQL endpoint will be able to query the title and author of an item.\nIt will be able to query the title of the items in the collection.\nIt will only be able to create a book with an author.\nWhen doing this mutation, the author of the created book will not be returned (the title will be instead).</p>\n<h3 id=\"different-types-when-using-different-serialization-groups\" style=\"position:relative;\"><a href=\"#different-types-when-using-different-serialization-groups\" aria-label=\"different types when using different serialization groups permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Different Types when Using Different Serialization Groups</h3>\n<p>When you use different serialization groups, it will create different types in your schema.</p>\n<p>Make sure you understand the implications when doing this: having different types means breaking the cache features in some GraphQL clients (in <a href=\"https://www.apollographql.com/docs/react/caching/cache-configuration/#automatic-cache-updates\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Apollo Client</a> for example).</p>\n<p>For instance:</p>\n<ul>\n<li>If you use a different <code class=\"language-text\">normalizationContext</code> for a mutation, a <code class=\"language-text\">MyResourcePayloadData</code> type with the restricted fields will be generated and used instead of <code class=\"language-text\">MyResource</code> (the query type).</li>\n<li>If you use a different <code class=\"language-text\">normalizationContext</code> for the query of an item (<code class=\"language-text\">Query</code> attribute) and for the query of a collection (<code class=\"language-text\">QueryCollection</code> attribute), two types <code class=\"language-text\">MyResourceItem</code> and <code class=\"language-text\">MyResourceCollection</code> with the restricted fields will be generated and used instead of <code class=\"language-text\">MyResource</code> (the query type).</li>\n</ul>\n<h3 id=\"embedded-relation-input-creation-of-relation-in-mutation\" style=\"position:relative;\"><a href=\"#embedded-relation-input-creation-of-relation-in-mutation\" aria-label=\"embedded relation input creation of relation in mutation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Embedded Relation Input (Creation of Relation in Mutation)</h3>\n<p>By default, creating a relation when using a <code class=\"language-text\">create</code> or <code class=\"language-text\">update</code> mutation is not possible.</p>\n<p>Indeed, the mutation expects an IRI for the relation in the input, so you need to use an existing relation.</p>\n<p>For instance if you have the following resource:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword type-declaration\">string</span> <span class=\"token variable\">$title</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token operator\">?</span><span class=\"token class-name type-declaration\">Author</span> <span class=\"token variable\">$author</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Creating a book with its author will be done like this, where <code class=\"language-text\">/authors/32</code> is the IRI of an existing resource:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property-query property-mutation\">createBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"The Name of the Wind\"</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">author</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/authors/32\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">book</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n        <span class=\"token object\">author</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">name</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In order to create an author as the same time as a book,\nyou need to use the denormalization context and groups on the book and the author\n(see also <a href=\"/docs/main/core/serialization/#denormalization\">the dedicated part in the serialization documentation</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Serializer<span class=\"token punctuation\">\\</span>Annotation<span class=\"token punctuation\">\\</span>Groups</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">denormalizationContext</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'book:create'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">Groups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'book:create'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword type-declaration\">string</span> <span class=\"token variable\">$title</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">Groups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'book:create'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token operator\">?</span><span class=\"token class-name type-declaration\">Author</span> <span class=\"token variable\">$author</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>And in the author resource:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Author.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Serializer<span class=\"token punctuation\">\\</span>Annotation<span class=\"token punctuation\">\\</span>Groups</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Author</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">Groups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'book:create'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword type-declaration\">string</span> <span class=\"token variable\">$name</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>In this case, creating a book with its author can now be done like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">mutation</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property-query property-mutation\">createBook</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"The Name of the Wind\"</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">author</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Patrick Rothfuss\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">book</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n        <span class=\"token object\">author</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">name</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"exception-and-error\" style=\"position:relative;\"><a href=\"#exception-and-error\" aria-label=\"exception and error permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Exception and Error</h2>\n<h3 id=\"handling-exceptions-and-errors-logging-filtering-\" style=\"position:relative;\"><a href=\"#handling-exceptions-and-errors-logging-filtering-\" aria-label=\"handling exceptions and errors logging filtering  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Handling Exceptions and Errors (Logging, Filtering, ...)</h3>\n<p>When there are errors (GraphQL ones, or if an exception is sent), a default error handler (<code class=\"language-text\">api_platform.graphql.error_handler</code>) is called.\nIts main responsibility is to apply a formatter to them.</p>\n<p>If you need to log the errors, or if you want to filter them, you have to decorate this service.</p>\n<p>For instance, create a class like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Error/ErrorHandler.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Error</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Error<span class=\"token punctuation\">\\</span>ErrorHandlerInterface</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">ErrorHandler</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ErrorHandlerInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$defaultErrorHandler</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">ErrorHandlerInterface</span> <span class=\"token variable\">$defaultErrorHandler</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">defaultErrorHandler</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$defaultErrorHandler</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__invoke</span><span class=\"token punctuation\">(</span><span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$errors</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">callable</span> <span class=\"token variable\">$formatter</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">array</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Log or filter the errors.</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">defaultErrorHandler</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$errors</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$formatter</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>Then register the service:</p>\n\n      <div class=\"code-selector\">\n          <div class=\"code-selector-toolbar\">\n              <button type=\"button\" class=\"code-selector-select-yaml selected\">yaml</button><button type=\"button\" class=\"code-selector-select-xml \">xml</button><button type=\"button\" class=\"code-selector-select-php \">php</button>\n          </div>\n          <div class=\"code-selector-code-yaml\" style=\"\"><div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/services.yaml</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span>\n    <span class=\"token key atrule\">App\\Error\\ErrorHandler</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">decorates</span><span class=\"token punctuation\">:</span> api_platform.graphql.error_handler</code></pre></div></div><div class=\"code-selector-code-xml\" style=\"display: none\"><div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?></span>\n<span class=\"token comment\">&lt;!-- api/config/services.xml --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>container</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://symfony.com/schema/dic/services<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xsd</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2001/XMLSchema-instance<span class=\"token punctuation\">\"</span></span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">xsd:</span>schemaLocation</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>services</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>service</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>App\\Error\\ErrorHandler<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token attr-name\">decorates</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>api_platform.graphql.error_handler<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>services</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>container</span><span class=\"token punctuation\">></span></span></code></pre></div></div><div class=\"code-selector-code-php\" style=\"display: none\"><div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/config/services.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>DependencyInjection<span class=\"token punctuation\">\\</span>Loader<span class=\"token punctuation\">\\</span>Configurator</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Error<span class=\"token punctuation\">\\</span>ErrorHandler</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Mailer</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">ContainerConfigurator</span> <span class=\"token variable\">$configurator</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token variable\">$services</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$configurator</span><span class=\"token operator\">-></span><span class=\"token function\">services</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token variable\">$services</span><span class=\"token operator\">-></span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token class-name static-context\">ErrorHandler</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span>\n        <span class=\"token operator\">-></span><span class=\"token function\">decorate</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'api_platform.graphql.error_handler'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span></code></pre></div></div>\n      </div>\n    \n<h3 id=\"formatting-exceptions-and-errors\" style=\"position:relative;\"><a href=\"#formatting-exceptions-and-errors\" aria-label=\"formatting exceptions and errors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Formatting Exceptions and Errors</h3>\n<p>By default, if an exception is sent when resolving a query or a mutation or if there are GraphQL errors, they are normalized following the <a href=\"https://github.com/graphql/graphql-spec/blob/master/spec/Section%207%20--%20Response.md#errors\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GraphQL specification</a>.</p>\n<p>It means an <code class=\"language-text\">errors</code> entry will be returned in the response, containing the following entries: <code class=\"language-text\">message</code>, <code class=\"language-text\">extensions</code>, <code class=\"language-text\">locations</code> and <code class=\"language-text\">path</code>.\nFor more information, please <a href=\"https://webonyx.github.io/graphql-php/error-handling/#default-error-formatting\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">refer to the documentation in graphql-php</a>.</p>\n<p>In <code class=\"language-text\">prod</code> mode, the displayed message will be a generic one, excepted for a <code class=\"language-text\">RuntimeException</code> (and all exceptions inherited from it) for which it will be its actual message.\nThis behavior is different from what is described in the <a href=\"https://webonyx.github.io/graphql-php/error-handling\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">graphql-php documentation</a>.\nIt's because a built-in <a href=\"#custom-exception-normalizer\">custom exception normalizer</a> is used to normalize the <code class=\"language-text\">RuntimeException</code> and change the default behavior.</p>\n<p>If you are in <code class=\"language-text\">dev</code> mode, more entries will be added in the response: <code class=\"language-text\">debugMessage</code> (containing the actual exception message, for instance in the case of a <code class=\"language-text\">LogicException</code>) and <code class=\"language-text\">trace</code> (the formatted exception trace).</p>\n<p>For some specific exceptions, built-in <a href=\"#custom-exception-normalizer\">custom exception normalizers</a> are also used to add more information.\nIt's the case for a <code class=\"language-text\">HttpException</code> for which the <code class=\"language-text\">status</code> entry will be added under <code class=\"language-text\">extensions</code> and for a <code class=\"language-text\">ValidationException</code> for which <code class=\"language-text\">status</code> (by default 422) and <code class=\"language-text\">violations</code> entries will be added.</p>\n<h4 id=\"custom-exception-normalizer\" style=\"position:relative;\"><a href=\"#custom-exception-normalizer\" aria-label=\"custom exception normalizer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom Exception Normalizer</h4>\n<p>If you want to add more specific behaviors depending on the exception or if you want to change the behavior of the built-in ones, you can do so by creating your own normalizer.</p>\n<p>Please follow the <a href=\"https://symfony.com/doc/current/serializer/custom_normalizer.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Symfony documentation to create a custom normalizer</a>.</p>\n<p>The code should look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Serializer/Exception/MyExceptionNormalizer.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Serializer<span class=\"token punctuation\">\\</span>Exception</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Exception<span class=\"token punctuation\">\\</span>MyException</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">GraphQL<span class=\"token punctuation\">\\</span>Error<span class=\"token punctuation\">\\</span>Error</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">GraphQL<span class=\"token punctuation\">\\</span>Error<span class=\"token punctuation\">\\</span>FormattedError</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Serializer<span class=\"token punctuation\">\\</span>Normalizer<span class=\"token punctuation\">\\</span>NormalizerInterface</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">MyExceptionNormalizer</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">NormalizerInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">normalize</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$object</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$format</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$context</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">array</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$exception</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$object</span><span class=\"token operator\">-></span><span class=\"token function\">getPrevious</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$error</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">FormattedError</span><span class=\"token operator\">::</span><span class=\"token function\">createFromException</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Add your logic here and add your specific data in the $error array (in the 'extensions' entry to follow the GraphQL specification).</span>\n        <span class=\"token comment\">// $error['extensions']['yourEntry'] = ...;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$error</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">supportsNormalization</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$format</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">bool</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$data</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Error</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token variable\">$data</span><span class=\"token operator\">-></span><span class=\"token function\">getPrevious</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">MyException</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>You can see that, in the <code class=\"language-text\">normalize</code> method, you should add a call to <code class=\"language-text\">FormattedError::createFromException</code> in order to have the same behavior as the other normalizers.</p>\n<p>When registering your custom normalizer, you can add a priority to order your normalizers between themselves.</p>\n<p>If you use a positive priority (or no priority), your normalizer will always be called before the built-in normalizers.\nFor instance, you can register a custom normalizer like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/services.yaml</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">App\\Serializer\\Exception\\MyExceptionNormalizer</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'serializer.normalizer'</span><span class=\"token punctuation\">,</span> <span class=\"token key atrule\">priority</span><span class=\"token punctuation\">:</span> <span class=\"token number\">12</span> <span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"name-conversion\" style=\"position:relative;\"><a href=\"#name-conversion\" aria-label=\"name conversion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Name Conversion</h2>\n<p>You can modify how the property names of your resources are converted into field and filter names of your GraphQL schema.</p>\n<p>By default the property name will be used without conversion. If you want to apply a name converter, follow the <a href=\"/docs/main/core/serialization/#name-conversion\">Name Conversion documentation</a>.</p>\n<p>For instance, your resource can have properties in camelCase:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiFilter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Doctrine<span class=\"token punctuation\">\\</span>Orm<span class=\"token punctuation\">\\</span>Filter<span class=\"token punctuation\">\\</span>SearchFilter</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiFilter</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">SearchFilter</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">properties</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'publicationDate'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'partial'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$publicationDate</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>By default, with the search filter, the query to retrieve a collection will be:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">books</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">publicationDate</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">publicationDate</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>But if you use the <code class=\"language-text\">CamelCaseToSnakeCaseNameConverter</code>, it will be:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">books</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">publication_date</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"2010\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">publication_date</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"nesting-separator\" style=\"position:relative;\"><a href=\"#nesting-separator\" aria-label=\"nesting separator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nesting Separator</h3>\n<p>If you use snake_case, you can wonder how to make the difference between an underscore and the separator of the nested fields in the filter names, by default an underscore too.</p>\n<p>For instance if you have this resource:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiFilter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Doctrine<span class=\"token punctuation\">\\</span>Orm<span class=\"token punctuation\">\\</span>Filter<span class=\"token punctuation\">\\</span>SearchFilter</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiFilter</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">SearchFilter</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">properties</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'relatedBooks.title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'exact'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$title</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name class-name-fully-qualified\">ORM<span class=\"token punctuation\">\\</span>OneToMany</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">targetEntity</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">Book</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token variable\">$relatedBooks</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>You would need to use the search filter like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">books</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">related_books_title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"The Fitz and the Fool\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>To avoid this issue, you can configure the nesting separator to use, for example, <code class=\"language-text\">__</code> instead of <code class=\"language-text\">_</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/packages/api_platform.yaml</span>\n<span class=\"token key atrule\">api_platform</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">graphql</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">nesting_separator</span><span class=\"token punctuation\">:</span> __\n<span class=\"token comment\"># ...</span></code></pre></div>\n<p>In this case, your query will be:</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">books</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">related_books__title</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"The Fitz and the Fool\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token object\">edges</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token object\">node</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">title</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Much better, isn't it?</p>\n<h2 id=\"custom-types\" style=\"position:relative;\"><a href=\"#custom-types\" aria-label=\"custom types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom Types</h2>\n<p>You might need to add your own types to your GraphQL application.</p>\n<p>Create your type class by implementing the interface <code class=\"language-text\">ApiPlatform\\GraphQl\\Type\\Definition\\TypeInterface</code>.</p>\n<p>You should extend the <code class=\"language-text\">GraphQL\\Type\\Definition\\ScalarType</code> class too to take advantage of its useful methods.</p>\n<p>For instance, to create a custom <code class=\"language-text\">DateType</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Type<span class=\"token punctuation\">\\</span>Definition</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Type<span class=\"token punctuation\">\\</span>Definition<span class=\"token punctuation\">\\</span>TypeInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">GraphQL<span class=\"token punctuation\">\\</span>Error<span class=\"token punctuation\">\\</span>Error</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">GraphQL<span class=\"token punctuation\">\\</span>Language<span class=\"token punctuation\">\\</span>AST<span class=\"token punctuation\">\\</span>StringValueNode</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">GraphQL<span class=\"token punctuation\">\\</span>Type<span class=\"token punctuation\">\\</span>Definition<span class=\"token punctuation\">\\</span>ScalarType</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">GraphQL<span class=\"token punctuation\">\\</span>Utils<span class=\"token punctuation\">\\</span>Utils</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">DateTimeType</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ScalarType</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TypeInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'DateTime'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">description</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'The `DateTime` scalar type represents time data.'</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword static-context\">parent</span><span class=\"token operator\">::</span><span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">string</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">name</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">serialize</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Already serialized.</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\"><span class=\"token punctuation\">\\</span>is_string</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name class-name-fully-qualified\"><span class=\"token punctuation\">\\</span>DateTime</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name class-name-fully-qualified\"><span class=\"token punctuation\">\\</span>DateTime</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Value must be an instance of DateTime to be represented by DateTime: %s'</span><span class=\"token punctuation\">,</span> <span class=\"token class-name static-context\">Utils</span><span class=\"token operator\">::</span><span class=\"token function\">printSafe</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$value</span><span class=\"token operator\">-></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token class-name class-name-fully-qualified static-context\"><span class=\"token punctuation\">\\</span>DateTime</span><span class=\"token operator\">::</span><span class=\"token constant\">ATOM</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">parseValue</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\"><span class=\"token punctuation\">\\</span>is_string</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'DateTime cannot represent non string value: %s'</span><span class=\"token punctuation\">,</span> <span class=\"token class-name static-context\">Utils</span><span class=\"token operator\">::</span><span class=\"token function\">printSafeJson</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token constant boolean\">false</span> <span class=\"token operator\">===</span> <span class=\"token class-name class-name-fully-qualified static-context\"><span class=\"token punctuation\">\\</span>DateTime</span><span class=\"token operator\">::</span><span class=\"token function\">createFromFormat</span><span class=\"token punctuation\">(</span><span class=\"token class-name class-name-fully-qualified static-context\"><span class=\"token punctuation\">\\</span>DateTime</span><span class=\"token operator\">::</span><span class=\"token constant\">ATOM</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'DateTime cannot represent non date value: %s'</span><span class=\"token punctuation\">,</span> <span class=\"token class-name static-context\">Utils</span><span class=\"token operator\">::</span><span class=\"token function\">printSafeJson</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// Will be denormalized into a \\DateTime.</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$value</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">parseLiteral</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$valueNode</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">?</span><span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$variables</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$valueNode</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">StringValueNode</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token constant boolean\">false</span> <span class=\"token operator\">!==</span> <span class=\"token class-name class-name-fully-qualified static-context\"><span class=\"token punctuation\">\\</span>DateTime</span><span class=\"token operator\">::</span><span class=\"token function\">createFromFormat</span><span class=\"token punctuation\">(</span><span class=\"token class-name class-name-fully-qualified static-context\"><span class=\"token punctuation\">\\</span>DateTime</span><span class=\"token operator\">::</span><span class=\"token constant\">ATOM</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$valueNode</span><span class=\"token operator\">-></span><span class=\"token property\">value</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token variable\">$valueNode</span><span class=\"token operator\">-></span><span class=\"token property\">value</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">// Intentionally without message, as all information already in wrapped Exception</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name class-name-fully-qualified\"><span class=\"token punctuation\">\\</span>Exception</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>You can also check the documentation of <a href=\"https://webonyx.github.io/graphql-php/type-system/scalar-types/#writing-custom-scalar-types\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">graphql-php</a>.</p>\n<p>The big difference in API Platform is that the value is already serialized when it's received in your type class.\nSimilarly, you would not want to denormalize your parsed value since it will be done by API Platform later.</p>\n<p>If you use autoconfiguration (the default Symfony configuration) in your application, then you are done!</p>\n<p>Else, you need to tag your type class like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/services.yaml</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span>\n    <span class=\"token key atrule\">App\\Type\\Definition\\DateTimeType</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">tags</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">{</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> api_platform.graphql.type <span class=\"token punctuation\">}</span></code></pre></div>\n<p>Your custom type is now registered and is available in the <code class=\"language-text\">TypesContainer</code>.</p>\n<p>To use it please <a href=\"#modify-the-extracted-types\">modify the extracted types</a> or use it directly in <a href=\"#custom-queries\">custom queries</a> or <a href=\"#custom-mutations\">custom mutations</a>.</p>\n<h2 id=\"modify-the-extracted-types\" style=\"position:relative;\"><a href=\"#modify-the-extracted-types\" aria-label=\"modify the extracted types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Modify the Extracted Types</h2>\n<p>The GraphQL schema and its types are extracted from your resources.\nIn some cases, you would want to modify the extracted types for instance to use your custom ones.</p>\n<p>To do so, you need to decorate the <code class=\"language-text\">api_platform.graphql.type_converter</code> service:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/services.yaml</span>\n<span class=\"token key atrule\">services</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># ...</span>\n    <span class=\"token key atrule\">'App\\Type\\TypeConverter'</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">decorates</span><span class=\"token punctuation\">:</span> api_platform.graphql.type_converter</code></pre></div>\n<p>Your class needs to look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Type</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Type<span class=\"token punctuation\">\\</span>TypeConverterInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Operation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity<span class=\"token punctuation\">\\</span>Book</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">GraphQL<span class=\"token punctuation\">\\</span>Type<span class=\"token punctuation\">\\</span>Definition<span class=\"token punctuation\">\\</span>Type</span> <span class=\"token keyword\">as</span> GraphQLType<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>PropertyInfo<span class=\"token punctuation\">\\</span>Type</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">TypeConverter</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TypeConverterInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$defaultTypeConverter</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">TypeConverterInterface</span> <span class=\"token variable\">$defaultTypeConverter</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">defaultTypeConverter</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$defaultTypeConverter</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">convertType</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">Type</span> <span class=\"token variable\">$type</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">bool</span> <span class=\"token variable\">$input</span><span class=\"token punctuation\">,</span> <span class=\"token class-name type-declaration\">Operation</span> <span class=\"token variable\">$rootOperation</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$resourceClass</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$rootResource</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">?</span><span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$property</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">int</span> <span class=\"token variable\">$depth</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'publicationDate'</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$property</span>\n            <span class=\"token operator\">&amp;&amp;</span> <span class=\"token class-name static-context\">Book</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$resourceClass</span>\n        <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token string single-quoted-string\">'DateTime'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">defaultTypeConverter</span><span class=\"token operator\">-></span><span class=\"token function\">convertType</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$type</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$input</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$rootOperation</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$resourceClass</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$rootResource</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$property</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$depth</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * {@inheritdoc}\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">resolveType</span><span class=\"token punctuation\">(</span><span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$type</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span><span class=\"token class-name return-type\">GraphQLType</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">defaultTypeConverter</span><span class=\"token operator\">-></span><span class=\"token function\">resolveType</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$type</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>In this case, the <code class=\"language-text\">publicationDate</code> property of the <code class=\"language-text\">Book</code> class will have a custom <code class=\"language-text\">DateTime</code> type.</p>\n<p>You can even apply this logic for a kind of property. Replace the previous condition with something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name static-context\">Type</span><span class=\"token operator\">::</span><span class=\"token constant\">BUILTIN_TYPE_OBJECT</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$type</span><span class=\"token operator\">-></span><span class=\"token function\">getBuiltinType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">is_a</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$type</span><span class=\"token operator\">-></span><span class=\"token function\">getClassName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name class-name-fully-qualified static-context\"><span class=\"token punctuation\">\\</span>DateTimeInterface</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string single-quoted-string\">'DateTime'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>All <code class=\"language-text\">DateTimeInterface</code> properties will have the <code class=\"language-text\">DateTime</code> type in this example.</p>\n<h2 id=\"changing-the-serialization-context-dynamically\" style=\"position:relative;\"><a href=\"#changing-the-serialization-context-dynamically\" aria-label=\"changing the serialization context dynamically permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Changing the Serialization Context Dynamically</h2>\n<p><a href=\"/docs/main/core/serialization/#changing-the-serialization-context-dynamically\">As REST</a>, it's possible to add dynamically a (de)serialization group when resolving a query or a mutation.</p>\n<p>There are some differences though.</p>\n<p>The service is <code class=\"language-text\">api_platform.graphql.serializer.context_builder</code> and the method to override is <code class=\"language-text\">create</code>.</p>\n<p>The decorator could be like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Serializer</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Serializer<span class=\"token punctuation\">\\</span>SerializerContextBuilderInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity<span class=\"token punctuation\">\\</span>Book</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Security<span class=\"token punctuation\">\\</span>Core<span class=\"token punctuation\">\\</span>Authorization<span class=\"token punctuation\">\\</span>AuthorizationCheckerInterface</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">BookContextBuilder</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">SerializerContextBuilderInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$decorated</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token variable\">$authorizationChecker</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token class-name type-declaration\">SerializerContextBuilderInterface</span> <span class=\"token variable\">$decorated</span><span class=\"token punctuation\">,</span> <span class=\"token class-name type-declaration\">AuthorizationCheckerInterface</span> <span class=\"token variable\">$authorizationChecker</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">decorated</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$decorated</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">authorizationChecker</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$authorizationChecker</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">create</span><span class=\"token punctuation\">(</span><span class=\"token operator\">?</span><span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$resourceClass</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$operationName</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$resolverContext</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">bool</span> <span class=\"token variable\">$normalization</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">array</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$context</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">decorated</span><span class=\"token operator\">-></span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$resourceClass</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$operationName</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$resolverContext</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$normalization</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$resourceClass</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'resource_class'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">??</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$resourceClass</span> <span class=\"token operator\">===</span> <span class=\"token class-name static-context\">Book</span><span class=\"token operator\">::</span><span class=\"token keyword\">class</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$context</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">authorizationChecker</span><span class=\"token operator\">-></span><span class=\"token function\">isGranted</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'ROLE_ADMIN'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token constant boolean\">false</span> <span class=\"token operator\">===</span> <span class=\"token variable\">$normalization</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token variable\">$context</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'admin:input'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<h2 id=\"export-the-schema-in-sdl\" style=\"position:relative;\"><a href=\"#export-the-schema-in-sdl\" aria-label=\"export the schema in sdl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Export the Schema in SDL</h2>\n<p>You may need to export your schema in SDL (Schema Definition Language) to import it in some tools.</p>\n<p>The <code class=\"language-text\">api:graphql:export</code> command is provided to do so:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre class=\"language-shell-session\"><code class=\"language-shell-session\"><span class=\"token output\">docker compose exec php \\\n    bin/console api:graphql:export -o path/to/your/volume/schema.graphql</span></code></pre></div>\n<p>Since the command prints the schema to the output if you don't use the <code class=\"language-text\">-o</code> option, you can also use this command:</p>\n<div class=\"gatsby-highlight\" data-language=\"shell-session\"><pre class=\"language-shell-session\"><code class=\"language-shell-session\"><span class=\"token output\">docker compose exec php \\\n    bin/console api:graphql:export > path/in/host/schema.graphql</span></code></pre></div>\n<h2 id=\"handling-file-upload\" style=\"position:relative;\"><a href=\"#handling-file-upload\" aria-label=\"handling file upload permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Handling File Upload</h2>\n<p>Please follow the <a href=\"/docs/main/core/file-upload/\">file upload documentation</a>, only the differences will be documented here.</p>\n<p>The file upload with GraphQL follows the <a href=\"https://github.com/jaydenseric/graphql-multipart-request-spec\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GraphQL multipart request specification</a>.</p>\n<p>You can also upload multiple files at the same time.</p>\n<h3 id=\"configuring-the-entity-receiving-the-uploaded-file\" style=\"position:relative;\"><a href=\"#configuring-the-entity-receiving-the-uploaded-file\" aria-label=\"configuring the entity receiving the uploaded file permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuring the Entity Receiving the Uploaded File</h3>\n<p>Configure the entity by adding a <a href=\"#custom-mutations\">custom mutation resolver</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/MediaObject.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiProperty</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>CreateMediaObjectResolver</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Doctrine<span class=\"token punctuation\">\\</span>ORM<span class=\"token punctuation\">\\</span>Mapping</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">ORM</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpFoundation<span class=\"token punctuation\">\\</span>File<span class=\"token punctuation\">\\</span>File</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Serializer<span class=\"token punctuation\">\\</span>Annotation<span class=\"token punctuation\">\\</span>Groups</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>Validator<span class=\"token punctuation\">\\</span>Constraints</span> <span class=\"token keyword\">as</span> Assert<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Vich<span class=\"token punctuation\">\\</span>UploaderBundle<span class=\"token punctuation\">\\</span>Mapping<span class=\"token punctuation\">\\</span>Annotation</span> <span class=\"token keyword\">as</span> Vich<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @Vich\\Uploadable\n */</span>\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name class-name-fully-qualified\">ORM<span class=\"token punctuation\">\\</span>Entity</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span>\n    <span class=\"token attribute-class-name class-name\">normalizationContext</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'groups'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'media_object_read'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n    <span class=\"token attribute-class-name class-name\">types</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'https://schema.org/MediaObject'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span>\n            <span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'upload'</span><span class=\"token punctuation\">,</span> \n            <span class=\"token attribute-class-name class-name\">resolver</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">CreateMediaObjectResolver</span><span class=\"token operator\">::</span><span class=\"token constant\">class</span><span class=\"token punctuation\">,</span> \n            <span class=\"token attribute-class-name class-name\">deserialize</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">false</span><span class=\"token punctuation\">,</span> \n            <span class=\"token attribute-class-name class-name\">args</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n                <span class=\"token string single-quoted-string\">'file'</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n                    <span class=\"token string single-quoted-string\">'type'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Upload!'</span><span class=\"token punctuation\">,</span> \n                    <span class=\"token string single-quoted-string\">'description'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'The file to upload'</span>\n                <span class=\"token punctuation\">]</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">MediaObject</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name class-name-fully-qualified\">ORM<span class=\"token punctuation\">\\</span>Id</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name class-name-fully-qualified\">ORM<span class=\"token punctuation\">\\</span>Column</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name class-name-fully-qualified\">ORM<span class=\"token punctuation\">\\</span>GeneratedValue</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">protected</span> <span class=\"token operator\">?</span><span class=\"token keyword type-hint\">int</span> <span class=\"token variable\">$id</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiProperty</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">types</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'https://schema.org/contentUrl'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">Groups</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'media_object_read'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token operator\">?</span><span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$contentUrl</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/**\n     * @Vich\\UploadableField(mapping=\"media_object\", fileNameProperty=\"filePath\")\n     */</span>\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name class-name-fully-qualified\">Assert<span class=\"token punctuation\">\\</span>NotNull</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">groups</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'media_object_create'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span> \n    <span class=\"token keyword\">public</span> <span class=\"token operator\">?</span><span class=\"token class-name type-declaration\">File</span> <span class=\"token variable\">$file</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name class-name-fully-qualified\">ORM<span class=\"token punctuation\">\\</span>Column</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">nullable</span><span class=\"token punctuation\">:</span> <span class=\"token attribute-class-name class-name\">true</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n    <span class=\"token keyword\">public</span> <span class=\"token operator\">?</span><span class=\"token keyword type-hint\">string</span> <span class=\"token variable\">$filePath</span> <span class=\"token operator\">=</span> <span class=\"token constant\">null</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span><span class=\"token keyword return-type\">int</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$this</span><span class=\"token operator\">-></span><span class=\"token property\">id</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>As you can see, a dedicated type <code class=\"language-text\">Upload</code> is used in the argument of the <code class=\"language-text\">upload</code> mutation.\nIf you need to upload multiple files, replace <code class=\"language-text\">'file' => ['type' => 'Upload!', 'description' => 'The file to upload']</code>\nwith <code class=\"language-text\">'files' => ['type' => '[Upload!]!', 'description' => 'Files to upload']</code>.</p>\n<p>You don't need to create it, it's provided in API Platform.</p>\n<h3 id=\"resolving-the-file-upload\" style=\"position:relative;\"><a href=\"#resolving-the-file-upload\" aria-label=\"resolving the file upload permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Resolving the File Upload</h3>\n<p>The corresponding resolver you added in the resource configuration should be written like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Resolver/CreateMediaObjectResolver.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Resolver</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Resolver<span class=\"token punctuation\">\\</span>MutationResolverInterface</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity<span class=\"token punctuation\">\\</span>MediaObject</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpFoundation<span class=\"token punctuation\">\\</span>File<span class=\"token punctuation\">\\</span>UploadedFile</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">CreateMediaObjectResolver</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">MutationResolverInterface</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/**\n     * @param null $item\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">__invoke</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$item</span><span class=\"token punctuation\">,</span> <span class=\"token keyword type-hint\">array</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token class-name return-type\">MediaObject</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$uploadedFile</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$context</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'args'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'file'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token variable\">$mediaObject</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MediaObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$mediaObject</span><span class=\"token operator\">-></span><span class=\"token property\">file</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$uploadedFile</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$mediaObject</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>\n<p>For handling the upload of multiple files, iterate over <code class=\"language-text\">$context['args']['input']['files']</code>.</p>\n<h3 id=\"using-the-createmediaobject-mutation\" style=\"position:relative;\"><a href=\"#using-the-createmediaobject-mutation\" aria-label=\"using the createmediaobject mutation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Using the <code class=\"language-text\">createMediaObject</code> Mutation</h3>\n<p>Following the specification, the upload must be done with a <code class=\"language-text\">multipart/form-data</code> content type.</p>\n<p>You need to enable it in the <a href=\"/docs/main/core/content-negotiation/#configuring-formats-globally\">allowed formats of API Platform</a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># api/config/packages/api_platform.yaml</span>\n<span class=\"token key atrule\">api_platform</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">formats</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># ...</span>\n        <span class=\"token key atrule\">multipart</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'multipart/form-data'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>You can now upload files using the <code class=\"language-text\">createMediaObject</code> mutation, for details check <a href=\"https://github.com/jaydenseric/graphql-multipart-request-spec\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GraphQL multipart request specification</a>\nand for an example implementation for the Apollo client check out <a href=\"https://github.com/jaydenseric/apollo-upload-client\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Apollo Upload Client</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">mutation</span> <span class=\"token definition-mutation function\">CreateMediaObject</span><span class=\"token punctuation\">(</span><span class=\"token variable variable-input\">$file</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Upload</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property-query property-mutation\">createMediaObject</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">input</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token attr-name\">file</span><span class=\"token punctuation\">:</span> <span class=\"token variable variable-input\">$file</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token object\">mediaObject</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">id</span>\n            <span class=\"token property\">contentUrl</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"change-default-descriptions\" style=\"position:relative;\"><a href=\"#change-default-descriptions\" aria-label=\"change default descriptions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change Default Descriptions</h2>\n<p>By default, API Platform generates descriptions for mutations and subscriptions.</p>\n<p>If you want to change them, or add some for queries, you can do it in the resource declaration, at the operation level, with the <code class=\"language-text\">description</code> attribute.</p>\n<p>For instance, if you want to change the description of the <code class=\"language-text\">create</code> mutation:</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token comment\">// api/src/Entity/Book.php</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token package\">App<span class=\"token punctuation\">\\</span>Entity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>ApiResource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token package\">ApiPlatform<span class=\"token punctuation\">\\</span>Metadata<span class=\"token punctuation\">\\</span>GraphQl<span class=\"token punctuation\">\\</span>Mutation</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token attribute\"><span class=\"token delimiter punctuation\">#[</span><span class=\"token attribute-content\"><span class=\"token attribute-class-name class-name\">ApiResource</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">graphQlOperations</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token attribute-class-name class-name\">new</span> <span class=\"token attribute-class-name class-name\">Mutation</span><span class=\"token punctuation\">(</span><span class=\"token attribute-class-name class-name\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'create'</span><span class=\"token punctuation\">,</span> <span class=\"token attribute-class-name class-name\">description</span><span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">'My custom description.'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></span><span class=\"token delimiter punctuation\">]</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name-definition class-name\">Book</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></span></code></pre></div>","nav":{"chapters":[{"title":"The Distribution: Create Powerful APIs with Ease","path":"distribution","items":[{"id":"index","title":"Getting Started With API Platform: Create Your API and Your Jamstack Site","anchors":[{"id":"introduction","title":"Introduction"},{"id":"a-bookshop-api","title":"A Bookshop API"},{"id":"installing-the-framework","title":"Installing the Framework","anchors":[{"id":"using-the-api-platform-distribution-recommended","title":"Using the API Platform Distribution (Recommended)"},{"id":"using-symfony-cli","title":"Using Symfony CLI"}]},{"id":"its-ready","title":"It's Ready"},{"id":"bringing-your-own-model","title":"Bringing your Own Model"},{"id":"plugging-the-persistence-system","title":"Plugging the Persistence System"},{"id":"validating-data","title":"Validating Data"},{"id":"adding-graphql-support","title":"Adding GraphQL Support"},{"id":"the-admin","title":"The Admin"},{"id":"a-nextjs-web-app","title":"A Next.js Web App"},{"id":"hooking-your-own-business-logic","title":"Hooking Your Own Business Logic"},{"id":"other-features","title":"Other Features"},{"id":"screencasts","title":"Screencasts"}]},{"id":"testing","title":"Testing the API","anchors":[{"id":"creating-data-fixtures","title":"Creating Data Fixtures"},{"id":"writing-functional-tests","title":"Writing Functional Tests"},{"id":"writing-unit-tests","title":"Writing Unit Tests"},{"id":"additional-and-alternative-testing-tools","title":"Additional and Alternative Testing Tools"},{"id":"using-the-api-platform-distribution-for-end-to-end-testing","title":"Using the API Platform Distribution for End-to-end Testing"}]},{"id":"debugging","title":"Debugging","anchors":[{"id":"xdebug","title":"Xdebug"},{"id":"add-a-development-stage-to-the-dockerfile","title":"Add a Development Stage to the Dockerfile"},{"id":"configure-xdebug-with-docker-compose-override","title":"Configure Xdebug with Docker Compose Override"},{"id":"troubleshooting","title":"Troubleshooting"}]},{"id":"caddy","title":"Configuring the Caddy Web Server"}]},{"title":"Core","path":"core","items":[{"id":"index","title":"The API Platform Core Library","anchors":[{"id":"features","title":"Features"},{"id":"screencasts","title":"Screencasts"}]},{"id":"getting-started","title":"Getting started","anchors":[{"id":"migrating-from-fosrestbundle","title":"Migrating from FOSRestBundle"},{"id":"installing-api-platform","title":"Installing API Platform"},{"id":"before-reading-this-documentation","title":"Before Reading this Documentation"},{"id":"mapping-the-entities","title":"Mapping the Entities","anchors":[{"id":"product","title":"Product"}]}]},{"id":"upgrade-guide","title":"Upgrade Guide","anchors":[{"id":"api-platform-2730","title":"API Platform 2.7/3.0","anchors":[{"id":"i-want-to-try-the-new-metadata-system","title":"I Want to Try the New Metadata System"},{"id":"im-migrating-from-26-and-want-to-prepare-for-30","title":"I'm Migrating From 2.6 and Want to Prepare For 3.0"}]},{"id":"changes","title":"Changes","anchors":[{"id":"summary-of-the-changes-between-26-and-2730","title":"Summary of the Changes Between 2.6 And 2.7/3.0"},{"id":"apiresource-metadata","title":"ApiResource Metadata"},{"id":"removal-of-itemcollection-operations","title":"Removal of Item/Collection Operations"},{"id":"metadata-changes","title":"Metadata Changes","anchors":[{"id":"apiresource","title":"#[ApiResource]"},{"id":"apiproperty","title":"#[ApiProperty]"}]},{"id":"the-metadatabackwardcompatibility_layer-flag","title":"The metadatabackwardcompatibility_layer Flag"},{"id":"searchfilter","title":"SearchFilter"}]},{"id":"the-upgrade-command","title":"The Upgrade Command"},{"id":"providersprocessors","title":"Providers/Processors"},{"id":"datatransformers-and-dto-support","title":"DataTransformers and DTO Support"}]},{"id":"design","title":"General Design Considerations"},{"id":"extending","title":"Extending API Platform","anchors":[{"id":"doctrine-specific-extension-points","title":"Doctrine Specific Extension Points"},{"id":"leveraging-the-built-in-infrastructure-using-composition","title":"Leveraging the Built-in Infrastructure Using Composition"}]},{"id":"testing","title":"Testing Utilities","anchors":[{"id":"the-test-httpclient","title":"The Test HttpClient"},{"id":"api-test-assertions","title":"API Test Assertions"},{"id":"http-test-assertions","title":"HTTP Test Assertions"}]},{"id":"operations","title":"Operations","anchors":[{"id":"enabling-and-disabling-operations","title":"Enabling and Disabling Operations"},{"id":"configuring-operations","title":"Configuring Operations"},{"id":"prefixing-all-routes-of-all-operations","title":"Prefixing All Routes of All Operations"},{"id":"expose-a-model-without-any-routes","title":"Expose a Model Without Any Routes"}]},{"id":"graphql","title":"GraphQL Support","anchors":[{"id":"enabling-graphql","title":"Enabling GraphQL"},{"id":"changing-location-of-the-graphql-endpoint","title":"Changing Location of the GraphQL Endpoint"},{"id":"graphiql","title":"GraphiQL","anchors":[{"id":"add-another-location-for-graphiql","title":"Add another Location for GraphiQL"}]},{"id":"graphql-playground","title":"GraphQL Playground","anchors":[{"id":"add-another-location-for-graphql-playground","title":"Add another Location for GraphQL Playground"}]},{"id":"modifying-or-disabling-the-default-ide","title":"Modifying or Disabling the Default IDE"},{"id":"request-with-applicationgraphql-content-type","title":"Request with application/graphql Content-Type"},{"id":"operations","title":"Operations"},{"id":"queries","title":"Queries","anchors":[{"id":"global-object-identifier","title":"Global Object Identifier"},{"id":"custom-queries","title":"Custom Queries"}]},{"id":"mutations","title":"Mutations","anchors":[{"id":"client-mutation-id","title":"Client Mutation ID"},{"id":"custom-mutations","title":"Custom Mutations"}]},{"id":"subscriptions","title":"Subscriptions","anchors":[{"id":"enable-update-subscriptions-for-a-resource","title":"Enable Update Subscriptions for a Resource"},{"id":"subscribe","title":"Subscribe"},{"id":"receiving-an-update","title":"Receiving an Update"},{"id":"subscriptions-cache","title":"Subscriptions Cache"}]},{"id":"workflow-of-the-resolvers","title":"Workflow of the Resolvers","anchors":[{"id":"disabling-resolver-stages","title":"Disabling Resolver Stages"}]},{"id":"events","title":"Events"},{"id":"filters","title":"Filters","anchors":[{"id":"syntax-for-filters-with-a-list-of-key--value-arguments","title":"Syntax for Filters with a List of Key / Value Arguments"},{"id":"filtering-on-nested-properties","title":"Filtering on Nested Properties"}]},{"id":"pagination","title":"Pagination","anchors":[{"id":"using-the-cursor-based-pagination","title":"Using the Cursor-based Pagination"},{"id":"using-the-page-based-pagination","title":"Using the Page-based Pagination"},{"id":"disabling-the-pagination","title":"Disabling the Pagination","anchors":[{"id":"globally","title":"Globally"},{"id":"for-a-specific-resource","title":"For a Specific Resource"},{"id":"for-a-specific-resource-collection-operation","title":"For a Specific Resource Collection Operation"}]},{"id":"partial-pagination","title":"Partial Pagination"}]},{"id":"security","title":"Security","anchors":[{"id":"securing-properties-including-associations","title":"Securing Properties (Including Associations)"}]},{"id":"serialization-groups","title":"Serialization Groups","anchors":[{"id":"different-types-when-using-different-serialization-groups","title":"Different Types when Using Different Serialization Groups"},{"id":"embedded-relation-input-creation-of-relation-in-mutation","title":"Embedded Relation Input (Creation of Relation in Mutation)"}]},{"id":"exception-and-error","title":"Exception and Error","anchors":[{"id":"handling-exceptions-and-errors-logging-filtering-","title":"Handling Exceptions and Errors (Logging, Filtering, ...)"},{"id":"formatting-exceptions-and-errors","title":"Formatting Exceptions and Errors","anchors":[{"id":"custom-exception-normalizer","title":"Custom Exception Normalizer"}]}]},{"id":"name-conversion","title":"Name Conversion","anchors":[{"id":"nesting-separator","title":"Nesting Separator"}]},{"id":"custom-types","title":"Custom Types"},{"id":"modify-the-extracted-types","title":"Modify the Extracted Types"},{"id":"changing-the-serialization-context-dynamically","title":"Changing the Serialization Context Dynamically"},{"id":"export-the-schema-in-sdl","title":"Export the Schema in SDL"},{"id":"handling-file-upload","title":"Handling File Upload","anchors":[{"id":"configuring-the-entity-receiving-the-uploaded-file","title":"Configuring the Entity Receiving the Uploaded File"},{"id":"resolving-the-file-upload","title":"Resolving the File Upload"},{"id":"using-the-createmediaobject-mutation","title":"Using the createMediaObject Mutation"}]},{"id":"change-default-descriptions","title":"Change Default Descriptions"}]},{"id":"state-providers","title":"State Providers"},{"id":"state-processors","title":"State Processors","anchors":[{"id":"creating-a-custom-state-processor","title":"Creating a Custom State Processor"},{"id":"decorating-the-built-in-state-processors","title":"Decorating the Built-In State Processors"}]},{"id":"filters","title":"Filters","anchors":[{"id":"doctrine-orm-and-mongodb-odm-filters","title":"Doctrine ORM and MongoDB ODM Filters","anchors":[{"id":"basic-knowledge","title":"Basic Knowledge"},{"id":"search-filter","title":"Search Filter"},{"id":"date-filter","title":"Date Filter","anchors":[{"id":"managing-null-values","title":"Managing null Values"}]},{"id":"boolean-filter","title":"Boolean Filter"},{"id":"numeric-filter","title":"Numeric Filter"},{"id":"range-filter","title":"Range Filter"},{"id":"exists-filter","title":"Exists Filter","anchors":[{"id":"using-a-custom-exists-query-parameter-name","title":"Using a Custom Exists Query Parameter Name"}]},{"id":"order-filter-sorting","title":"Order Filter (Sorting)","anchors":[{"id":"comparing-with-null-values","title":"Comparing with Null Values"},{"id":"using-a-custom-order-query-parameter-name","title":"Using a Custom Order Query Parameter Name"}]},{"id":"filtering-on-nested-properties","title":"Filtering on Nested Properties"},{"id":"enabling-a-filter-for-all-properties-of-a-resource","title":"Enabling a Filter for All Properties of a Resource"}]},{"id":"elasticsearch-filters","title":"Elasticsearch Filters","anchors":[{"id":"ordering-filter-sorting","title":"Ordering Filter (Sorting)","anchors":[{"id":"using-a-custom-order-query-parameter-name-elastic","title":"Using a Custom Order Query Parameter Name (Elastic)"}]},{"id":"match-filter","title":"Match Filter"},{"id":"term-filter","title":"Term Filter"},{"id":"filtering-on-nested-properties-elastic","title":"Filtering on Nested Properties (Elastic)"}]},{"id":"serializer-filters","title":"Serializer Filters","anchors":[{"id":"group-filter","title":"Group Filter"},{"id":"property-filter","title":"Property filter"}]},{"id":"creating-custom-filters","title":"Creating Custom Filters","anchors":[{"id":"creating-custom-doctrine-orm-filters","title":"Creating Custom Doctrine ORM Filters","anchors":[{"id":"manual-service-and-attribute-registration","title":"Manual Service and Attribute Registration"}]},{"id":"creating-custom-doctrine-mongodb-odm-filters","title":"Creating Custom Doctrine MongoDB ODM Filters"},{"id":"creating-custom-elasticsearch-filters","title":"Creating Custom Elasticsearch Filters"},{"id":"using-doctrine-orm-filters","title":"Using Doctrine ORM Filters"}]},{"id":"apifilter-attribute","title":"ApiFilter Attribute"}]},{"id":"subresources","title":"Subresources","anchors":[{"id":"uri-variables-configuration","title":"URI Variables Configuration","anchors":[{"id":"answer-to-a-question","title":"Answer to a Question"},{"id":"company-employees","title":"Company Employee's"}]}]},{"id":"serialization","title":"The Serialization Process","anchors":[{"id":"overall-process","title":"Overall Process"},{"id":"available-serializers","title":"Available Serializers"},{"id":"the-serialization-context-groups-and-relations","title":"The Serialization Context, Groups and Relations","anchors":[{"id":"configuration","title":"Configuration"}]},{"id":"using-serialization-groups","title":"Using Serialization Groups"},{"id":"using-serialization-groups-per-operation","title":"Using Serialization Groups per Operation"},{"id":"embedding-relations","title":"Embedding Relations","anchors":[{"id":"normalization","title":"Normalization"},{"id":"denormalization","title":"Denormalization"},{"id":"force-iri-with-relations-of-the-same-type-parentchilds-relations","title":"Force IRI with relations of the same type (parent/childs relations)"},{"id":"plain-identifiers","title":"Plain Identifiers"}]},{"id":"property-normalization-context","title":"Property Normalization Context"},{"id":"calculated-field","title":"Calculated Field"},{"id":"changing-the-serialization-context-dynamically","title":"Changing the Serialization Context Dynamically"},{"id":"changing-the-serialization-context-on-a-per-item-basis","title":"Changing the Serialization Context on a Per-item Basis"},{"id":"name-conversion","title":"Name Conversion"},{"id":"decorating-a-serializer-and-adding-extra-data","title":"Decorating a Serializer and Adding Extra Data"},{"id":"entity-identifier-case","title":"Entity Identifier Case"},{"id":"embedding-the-json-ld-context","title":"Embedding the JSON-LD Context"},{"id":"collection-relation","title":"Collection Relation"}]},{"id":"validation","title":"Validation","anchors":[{"id":"validating-submitted-data","title":"Validating Submitted Data"},{"id":"using-validation-groups","title":"Using Validation Groups"},{"id":"using-validation-groups-on-operations","title":"Using Validation Groups on Operations"},{"id":"dynamic-validation-groups","title":"Dynamic Validation Groups"},{"id":"sequential-validation-groups","title":"Sequential Validation Groups"},{"id":"validating-delete-operations","title":"Validating Delete Operations"},{"id":"error-levels-and-payload-serialization","title":"Error Levels and Payload Serialization"},{"id":"validation-on-collection-relations","title":"Validation on Collection Relations"},{"id":"open-vocabulary-generated-from-validation-metadata","title":"Open Vocabulary Generated from Validation Metadata"},{"id":"specification-property-restrictions","title":"Specification property restrictions"}]},{"id":"security","title":"Security","anchors":[{"id":"executing-access-control-rules-after-denormalization","title":"Executing Access Control Rules After Denormalization"},{"id":"hooking-custom-permission-checks-using-voters","title":"Hooking Custom Permission Checks Using Voters"},{"id":"configuring-the-access-control-error-message","title":"Configuring the Access Control Error Message"},{"id":"filtering-collection-according-to-the-current-user-permissions","title":"Filtering Collection According to the Current User Permissions"},{"id":"disabling-operations","title":"Disabling Operations"},{"id":"changing-serialization-groups-depending-of-the-current-user","title":"Changing Serialization Groups Depending of the Current User"}]},{"id":"content-negotiation","title":"Content Negotiation","anchors":[{"id":"configuring-formats-globally","title":"Configuring Formats Globally"},{"id":"configuring-patch-formats","title":"Configuring PATCH Formats"},{"id":"configuring-error-formats","title":"Configuring Error Formats"},{"id":"configuring-formats-for-a-specific-resource-or-operation","title":"Configuring Formats For a Specific Resource or Operation"},{"id":"supporting-custom-formats","title":"Supporting Custom Formats","anchors":[{"id":"reusing-the-api-platform-infrastructure","title":"Reusing the API Platform Infrastructure"},{"id":"contributing-support-for-new-formats","title":"Contributing Support for New Formats"}]}]},{"id":"pagination","title":"Pagination","anchors":[{"id":"disabling-the-pagination","title":"Disabling the Pagination","anchors":[{"id":"disabling-the-pagination-globally","title":"Disabling the Pagination Globally"},{"id":"disabling-the-pagination-for-a-specific-resource","title":"Disabling the Pagination For a Specific Resource"},{"id":"disabling-the-pagination-client-side","title":"Disabling the Pagination Client-side","anchors":[{"id":"disabling-the-pagination-client-side-globally","title":"Disabling the Pagination Client-side Globally"},{"id":"disabling-the-pagination-client-side-for-a-specific-resource","title":"Disabling the Pagination Client-side For a Specific Resource"}]}]},{"id":"changing-the-number-of-items-per-page","title":"Changing the Number of Items per Page","anchors":[{"id":"changing-the-number-of-items-per-page-globally","title":"Changing the Number of Items per Page Globally"},{"id":"changing-the-number-of-items-per-page-for-a-specific-resource","title":"Changing the Number of Items per Page For a Specific Resource"},{"id":"changing-the-number-of-items-per-page-client-side","title":"Changing the Number of Items per Page Client-side","anchors":[{"id":"changing-the-number-of-items-per-page-client-side-globally","title":"Changing the Number of Items per Page Client-side Globally"},{"id":"changing-the-number-of-items-per-page-client-side-for-a-specific-resource","title":"Changing the Number of Items per Page Client-side For a Specific Resource"}]}]},{"id":"changing-maximum-items-per-page","title":"Changing Maximum Items Per Page","anchors":[{"id":"changing-maximum-items-per-page-globally","title":"Changing Maximum Items Per Page Globally"},{"id":"changing-maximum-items-per-page-for-a-specific-resource","title":"Changing Maximum Items Per Page For a Specific Resource"},{"id":"changing-maximum-items-per-page-for-a-specific-resource-collection-operation","title":"Changing Maximum Items Per Page For a Specific Resource Collection Operation"}]},{"id":"partial-pagination","title":"Partial Pagination","anchors":[{"id":"partial-pagination-globally","title":"Partial Pagination Globally"},{"id":"partial-pagination-for-a-specific-resource","title":"Partial Pagination For a Specific Resource"},{"id":"partial-pagination-client-side","title":"Partial Pagination Client-side","anchors":[{"id":"partial-pagination-client-side-globally","title":"Partial Pagination Client-side Globally"},{"id":"partial-pagination-client-side-for-a-specific-resource","title":"Partial Pagination Client-side For a Specific Resource"}]}]},{"id":"cursor-based-pagination","title":"Cursor-Based Pagination"},{"id":"controlling-the-behavior-of-the-doctrine-orm-paginator","title":"Controlling The Behavior of The Doctrine ORM Paginator"},{"id":"custom-controller-action","title":"Custom Controller Action"},{"id":"pagination-for-custom-state-providers","title":"Pagination for Custom State Providers"}]},{"id":"deprecations","title":"Deprecating Resources and Properties (Alternative to Versioning)","anchors":[{"id":"deprecating-resource-classes-operations-and-properties","title":"Deprecating Resource Classes, Operations and Properties"},{"id":"setting-the-sunset-http-header-to-indicate-when-a-resource-or-an-operation-will-be-removed","title":"Setting the Sunset HTTP Header to Indicate When a Resource or an Operation Will Be Removed"}]},{"id":"default-order","title":"Overriding Default Order"},{"id":"performance","title":"Performance and Cache","anchors":[{"id":"enabling-the-built-in-http-cache-invalidation-system","title":"Enabling the Built-in HTTP Cache Invalidation System","anchors":[{"id":"extending-cache-tags-for-invalidation","title":"Extending Cache-Tags for Invalidation"}]},{"id":"setting-custom-http-cache-headers","title":"Setting Custom HTTP Cache Headers"},{"id":"enabling-the-metadata-cache","title":"Enabling the Metadata Cache"},{"id":"using-ppm-php-pm","title":"Using PPM (PHP-PM)"},{"id":"doctrine-queries-and-indexes","title":"Doctrine Queries and Indexes","anchors":[{"id":"search-filter","title":"Search Filter"},{"id":"eager-loading","title":"Eager Loading","anchors":[{"id":"max-joins","title":"Max Joins"},{"id":"fetch-partial","title":"Fetch Partial"},{"id":"force-eager","title":"Force Eager"},{"id":"override-at-resource-and-operation-level","title":"Override at Resource and Operation Level"},{"id":"disable-eager-loading","title":"Disable Eager Loading"}]},{"id":"partial-pagination","title":"Partial Pagination"}]},{"id":"profiling-with-blackfireio","title":"Profiling with Blackfire.io"}]},{"id":"extensions","title":"Extensions","anchors":[{"id":"custom-doctrine-orm-extension","title":"Custom Doctrine ORM Extension","anchors":[{"id":"example","title":"Example","anchors":[{"id":"blocking-anonymous-users","title":"Blocking Anonymous Users"}]}]},{"id":"custom-doctrine-mongodb-odm-extension","title":"Custom Doctrine MongoDB ODM Extension"},{"id":"custom-elasticsearch-extension","title":"Custom Elasticsearch Extension"}]},{"id":"messenger","title":"Symfony Messenger Integration: CQRS and Async Message Processing","anchors":[{"id":"installing-symfony-messenger","title":"Installing Symfony Messenger"},{"id":"dispatching-a-resource-through-the-message-bus","title":"Dispatching a Resource through the Message Bus"},{"id":"registering-a-message-handler","title":"Registering a Message Handler"},{"id":"accessing-the-data-returned-by-the-handler","title":"Accessing the Data Returned by the Handler"},{"id":"detecting-removals","title":"Detecting Removals"},{"id":"using-messenger-with-an-input-object","title":"Using Messenger with an Input Object"}]},{"id":"dto","title":"Using Data Transfer Objects (DTOs)","anchors":[{"id":"implementing-a-write-operation-with-an-input-different-from-the-resource","title":"Implementing a Write Operation With an Input Different From the Resource"},{"id":"use-messenger-with-an-input-dto","title":"Use Messenger With an Input DTO"},{"id":"implementing-a-read-operation-with-an-output-different-from-the-resource","title":"Implementing a Read Operation With an Output Different From the Resource"}]},{"id":"openapi","title":"OpenAPI Specification Support (formerly Swagger)","anchors":[{"id":"using-the-openapi-command","title":"Using the OpenAPI Command"},{"id":"overriding-the-openapi-specification","title":"Overriding the OpenAPI Specification"},{"id":"using-the-openapi-and-swagger-contexts","title":"Using the OpenAPI and Swagger Contexts"},{"id":"changing-the-name-of-a-definition","title":"Changing the Name of a Definition"},{"id":"changing-operations-in-the-openapi-documentation","title":"Changing Operations in the OpenAPI Documentation"},{"id":"disabling-swagger-ui-or-redoc","title":"Disabling Swagger UI or ReDoc"},{"id":"changing-the-location-of-swagger-ui","title":"Changing the Location of Swagger UI","anchors":[{"id":"changing-the-route","title":"Changing the Route"},{"id":"disabling-swagger-ui-at-the-api-location","title":"Disabling Swagger UI at the API Location"}]},{"id":"using-a-custom-asset-package-in-swagger-ui","title":"Using a custom Asset Package in Swagger UI"},{"id":"overriding-the-ui-template","title":"Overriding the UI Template"},{"id":"compatibility-layer-with-amazon-api-gateway","title":"Compatibility Layer with Amazon API Gateway"},{"id":"oauth","title":"OAuth"},{"id":"info-object","title":"Info Object"}]},{"id":"json-schema","title":"JSON Schema Support","anchors":[{"id":"generating-a-json-schema","title":"Generating a JSON Schema"},{"id":"overriding-the-json-schema-specification","title":"Overriding the JSON Schema Specification"},{"id":"generating-a-json-schema-programmatically","title":"Generating a JSON Schema Programmatically"},{"id":"testing","title":"Testing"}]},{"id":"mercure","title":"Creating Async APIs using the Mercure Protocol","anchors":[{"id":"installing-mercure-support","title":"Installing Mercure Support"},{"id":"pushing-the-api-updates","title":"Pushing the API Updates"},{"id":"dispatching-private-updates-authorized-mode","title":"Dispatching Private Updates (Authorized Mode)"},{"id":"available-options","title":"Available Options"},{"id":"dispatching-restrictive-updates-security-mode","title":"Dispatching Restrictive Updates (Security Mode)"}]},{"id":"push-relations","title":"Pushing Related Resources Using HTTP/2"},{"id":"errors","title":"Errors Handling","anchors":[{"id":"converting-php-exceptions-to-http-errors","title":"Converting PHP Exceptions to HTTP Errors"},{"id":"message-scope","title":"Message Scope"},{"id":"fine-grained-configuration","title":"Fine-grained Configuration"}]},{"id":"external-vocabularies","title":"Using External Vocabularies"},{"id":"operation-path-naming","title":"Operation Path Naming","anchors":[{"id":"configuration","title":"Configuration"},{"id":"create-a-custom-operation-path-resolver","title":"Create a Custom Operation Path Resolver","anchors":[{"id":"defining-the-operation-segment-name-generator","title":"Defining the Operation Segment Name Generator"},{"id":"registering-the-service","title":"Registering the Service"},{"id":"configuring-it","title":"Configuring It"}]}]},{"id":"url-generation-strategy","title":"URL Generation Strategy"},{"id":"extending-jsonld-context","title":"Extending JSON-LD AND Hydra Contexts","anchors":[{"id":"json-ld","title":"JSON-LD"},{"id":"hydra","title":"Hydra"}]},{"id":"identifiers","title":"Identifiers","anchors":[{"id":"custom-identifier-normalizer","title":"Custom Identifier Normalizer"},{"id":"changing-identifier-in-a-doctrine-entity","title":"Changing Identifier in a Doctrine Entity"},{"id":"supported-identifiers","title":"Supported Identifiers"}]},{"id":"mongodb","title":"MongoDB Support","anchors":[{"id":"overview","title":"Overview"},{"id":"enabling-mongodb-support","title":"Enabling MongoDB Support"},{"id":"creating-documents","title":"Creating Documents"},{"id":"filtering","title":"Filtering"},{"id":"creating-custom-extensions","title":"Creating Custom Extensions"},{"id":"adding-execute-options","title":"Adding Execute Options"}]},{"id":"elasticsearch","title":"Elasticsearch Support","anchors":[{"id":"overview","title":"Overview"},{"id":"enabling-reading-support","title":"Enabling Reading Support"},{"id":"creating-models","title":"Creating Models","anchors":[{"id":"creating-custom-mapping","title":"Creating custom mapping"}]},{"id":"filtering","title":"Filtering"},{"id":"creating-custom-extensions","title":"Creating Custom Extensions"}]},{"id":"controllers","title":"Creating Custom Operations and Controllers","anchors":[{"id":"using-serialization-groups","title":"Using Serialization Groups"},{"id":"retrieving-the-entity","title":"Retrieving the Entity"},{"id":"alternative-method","title":"Alternative Method"}]},{"id":"events","title":"The Event System","anchors":[{"id":"built-in-event-listeners","title":"Built-in Event Listeners"},{"id":"custom-event-listeners","title":"Custom Event Listeners"}]},{"id":"file-upload","title":"Handling File Upload","anchors":[{"id":"installing-vichuploaderbundle","title":"Installing VichUploaderBundle"},{"id":"uploading-to-a-dedicated-resource","title":"Uploading to a Dedicated Resource","anchors":[{"id":"configuring-the-resource-receiving-the-uploaded-file","title":"Configuring the Resource Receiving the Uploaded File"},{"id":"creating-the-controller","title":"Creating the Controller"},{"id":"resolving-the-file-url","title":"Resolving the File URL"},{"id":"making-a-request-to-the-media_objects-endpoint","title":"Making a Request to the /media_objects Endpoint"},{"id":"accessing-your-media-objects-directly","title":"Accessing Your Media Objects Directly"},{"id":"linking-a-mediaobject-resource-to-another-resource","title":"Linking a MediaObject Resource to Another Resource"},{"id":"testing","title":"Testing"}]},{"id":"uploading-to-an-existing-resource-with-its-fields","title":"Uploading to an Existing Resource with its Fields","anchors":[{"id":"configuring-the-existing-resource-receiving-the-uploaded-file","title":"Configuring the Existing Resource Receiving the Uploaded File"},{"id":"handling-the-multipart-deserialization","title":"Handling the Multipart Deserialization"}]}]},{"id":"jwt","title":"JWT Authentication","anchors":[{"id":"installing-lexikjwtauthenticationbundle","title":"Installing LexikJWTAuthenticationBundle"},{"id":"configuring-the-symfony-securitybundle","title":"Configuring the Symfony SecurityBundle","anchors":[{"id":"adding-authentication-to-an-api-which-uses-a-path-prefix","title":"Adding Authentication to an API Which Uses a Path Prefix"},{"id":"be-sure-to-have-lexikjwtauthentication-configured-on-your-useridentityfield","title":"Be sure to have lexikjwtauthentication configured on your useridentityfield"}]},{"id":"documenting-the-authentication-mechanism-with-swaggeropen-api","title":"Documenting the Authentication Mechanism with Swagger/Open API","anchors":[{"id":"configuring-api-platform","title":"Configuring API Platform"},{"id":"adding-a-new-api-key","title":"Adding a New API Key"},{"id":"adding-endpoint-to-swaggerui-to-retrieve-a-jwt-token","title":"Adding endpoint to SwaggerUI to retrieve a JWT token"}]},{"id":"testing","title":"Testing","anchors":[{"id":"improving-tests-suite-speed","title":"Improving Tests Suite Speed"}]}]},{"id":"form-data","title":"Accept application/x-www-form-urlencoded Form Data","anchors":[{"id":"create-your-deserializelistener-decorator","title":"Create your DeserializeListener Decorator"},{"id":"creating-the-service-definition","title":"Creating the Service Definition"}]},{"id":"angularjs-integration","title":"AngularJS Integration","anchors":[{"id":"restangular","title":"Restangular"},{"id":"ng-admin","title":"ng-admin"}]},{"id":"fosuser-bundle","title":"FOSUserBundle Integration","anchors":[{"id":"installing-the-bundle","title":"Installing the Bundle"},{"id":"creating-a-user-entity-with-serialization-groups","title":"Creating a User Entity with Serialization Groups"}]},{"id":"nelmio-api-doc","title":"NelmioApiDocBundle Integration"},{"id":"bootstrap","title":"Bootstraping the core library"},{"id":"configuration","title":"Configuration","anchors":[{"id":"global-resources-defaults","title":"Global Resources Defaults"}]},{"id":"migrate-from-fosrestbundle","title":"Migrate From FOSRestBundle","anchors":[{"id":"features-comparison","title":"Features Comparison","anchors":[{"id":"make-crud-endpoints","title":"Make CRUD endpoints"},{"id":"make-custom-controllers","title":"Make custom controllers"},{"id":"routing-system-with-native-documentation-support","title":"Routing system (with native documentation support)"},{"id":"hook-into-the-requests-handling","title":"Hook into the requests handling"},{"id":"customize-the-formats-of-the-requests-and-the-responses","title":"Customize the formats of the requests and the responses"},{"id":"name-conversion","title":"Name conversion"},{"id":"handle-errors","title":"Handle errors"},{"id":"security","title":"Security"},{"id":"api-versioning","title":"API versioning"}]}]}]},{"title":"Schema Generator","path":"schema-generator","items":[{"id":"index","title":"The Schema Generator","anchors":[{"id":"what-is-schemaorg","title":"What Is Schema.org?"},{"id":"why-use-schemaorg-data-to-generate-a-php-model","title":"Why Use Schema.org Data to Generate a PHP Model?","anchors":[{"id":"dont-reinvent-the-wheel","title":"Don't Reinvent the Wheel"},{"id":"improve-seo-and-user-experience","title":"Improve SEO and User Experience"},{"id":"be-ready-for-the-future","title":"Be Ready for The Future"}]},{"id":"documentation","title":"Documentation"}]},{"id":"getting-started","title":"Getting Started","anchors":[{"id":"installation","title":"Installation"},{"id":"configuration","title":"Configuration","anchors":[{"id":"model-scaffolding","title":"Model Scaffolding"},{"id":"openapi-generation","title":"OpenAPI Generation"}]},{"id":"usage","title":"Usage"},{"id":"load-previously-generated-files","title":"Load Previously Generated Files"},{"id":"going-further","title":"Going Further","anchors":[{"id":"cardinality-extraction","title":"Cardinality Extraction"}]}]},{"id":"configuration","title":"Configuration","anchors":[{"id":"customizing-php-namespaces","title":"Customizing PHP Namespaces"},{"id":"forcing-a-field-type-range","title":"Forcing a Field Type (Range)"},{"id":"forcing-a-field-cardinality","title":"Forcing a Field Cardinality"},{"id":"changing-the-default-cardinality","title":"Changing the Default Cardinality"},{"id":"adding-a-custom-attribute-or-modifying-a-generated-attribute","title":"Adding a Custom Attribute or Modifying a Generated Attribute"},{"id":"forcing-or-enabling-a-class-parent","title":"Forcing (or Enabling) a Class Parent"},{"id":"forcing-a-class-to-be-abstract","title":"Forcing a Class to be Abstract"},{"id":"define-api-platform-operations","title":"Define API Platform Operations"},{"id":"forcing-a-nullable-property","title":"Forcing a Nullable Property"},{"id":"forcing-a-unique-property","title":"Forcing a Unique Property"},{"id":"making-a-property-read-only","title":"Making a Property Read-Only"},{"id":"making-a-property-write-only","title":"Making a Property Write-Only"},{"id":"forcing-an-embeddable-class-to-be-embedded","title":"Forcing an Embeddable Class to be Embedded"},{"id":"skipping-accessor-method-generation","title":"Skipping Accessor Method Generation"},{"id":"using-fluent-mutator-methods","title":"Using Fluent Mutator Methods"},{"id":"disabling-the-id-generator","title":"Disabling the id Generator"},{"id":"generating-uuids","title":"Generating UUIDs"},{"id":"user-submitted-uuids","title":"User-submitted UUIDs"},{"id":"generating-custom-ids","title":"Generating Custom IDs"},{"id":"disabling-usage-of-doctrine-collections","title":"Disabling Usage of Doctrine Collections"},{"id":"changing-the-field-visibility","title":"Changing the Field Visibility"},{"id":"generating-asserttype-attributes","title":"Generating Assert\\Type Attributes"},{"id":"forcing-doctrine-inheritance-mapping-attribute","title":"Forcing Doctrine Inheritance Mapping Attribute"},{"id":"interfaces-and-doctrine-resolve-target-entity-listener","title":"Interfaces and Doctrine Resolve Target Entity Listener","anchors":[{"id":"doctrine-resolve-target-entity-config-type","title":"Doctrine Resolve Target Entity Config Type"}]},{"id":"custom-schemas","title":"Custom Schemas"},{"id":"all-types-resolve-types-and-exclude","title":"All Types, Resolve Types and Exclude"},{"id":"checking-goodrelation-compatibility","title":"Checking GoodRelation Compatibility"},{"id":"author-phpdoc","title":"Author PHPDoc"},{"id":"php-file-header","title":"PHP File Header"},{"id":"disabling-generators-and-creating-custom-ones","title":"Disabling Generators and Creating Custom Ones"},{"id":"full-configuration-reference","title":"Full Configuration Reference"}]}]},{"title":"Admin","path":"admin","items":[{"id":"index","title":"The API Platform Admin","anchors":[{"id":"features","title":"Features"}]},{"id":"getting-started","title":"Getting Started","anchors":[{"id":"installation","title":"Installation"},{"id":"creating-the-admin","title":"Creating the Admin"}]},{"id":"handling-relations","title":"Handling Relations","anchors":[{"id":"embedded-relations","title":"Embedded Relations"},{"id":"display-a-field-of-an-embedded-relation","title":"Display a Field of an Embedded Relation"},{"id":"using-an-autocomplete-input-for-relations","title":"Using an Autocomplete Input for Relations"}]},{"id":"openapi","title":"OpenAPI","anchors":[{"id":"data-provider","title":"Data Provider"},{"id":"mercure-support","title":"Mercure Support"}]},{"id":"schema.org","title":"Using the Schema.org Vocabulary","anchors":[{"id":"displaying-related-resources-name-instead-of-its-iri","title":"Displaying Related Resource's Name Instead of its IRI"},{"id":"emails-urls-and-identifiers","title":"Emails, URLs and Identifiers"}]},{"id":"validation","title":"Validation","anchors":[{"id":"client-side-validation","title":"Client-side Validation"},{"id":"server-side-validation","title":"Server-side Validation"}]},{"id":"real-time-mercure","title":"Real-time Updates With Mercure","anchors":[{"id":"advanced-configuration","title":"Advanced Configuration"}]},{"id":"authentication-support","title":"Authentication Support"},{"id":"file-upload","title":"Handling File Upload"},{"id":"performance","title":"Performance","anchors":[{"id":"retrieve-all-relations-in-one-request","title":"Retrieve All Relations in One Request"}]},{"id":"customizing","title":"Customizing the Admin","anchors":[{"id":"customizing-the-admins-main-page-and-the-resource-list","title":"Customizing the Admin's Main Page and the Resource List"},{"id":"customizing-the-list-view","title":"Customizing the List View"},{"id":"customizing-the-show-view","title":"Customizing the Show View"},{"id":"customizing-the-create-form","title":"Customizing the Create Form"},{"id":"customizing-the-edit-form","title":"Customizing the Edit Form"},{"id":"going-further","title":"Going Further"}]},{"id":"components","title":"Components","anchors":[{"id":"resource-components","title":"Resource Components","anchors":[{"id":"adminguesser","title":"AdminGuesser","anchors":[{"id":"props","title":"Props"}]},{"id":"resourceguesser","title":"ResourceGuesser","anchors":[{"id":"resourceguesser-props","title":"ResourceGuesser Props"}]}]},{"id":"page-components","title":"Page Components","anchors":[{"id":"listguesser","title":"ListGuesser","anchors":[{"id":"listguesser-props","title":"ListGuesser Props"}]},{"id":"createguesser","title":"CreateGuesser","anchors":[{"id":"createguesser-props","title":"CreateGuesser Props"}]},{"id":"editguesser","title":"EditGuesser","anchors":[{"id":"editguesser-props","title":"EditGuesser Props"}]},{"id":"showguesser","title":"ShowGuesser","anchors":[{"id":"showguesser-props","title":"ShowGuesser Props"}]}]},{"id":"hydra","title":"Hydra","anchors":[{"id":"hydraadmin","title":"HydraAdmin","anchors":[{"id":"hydraadmin-props","title":"HydraAdmin Props"}]},{"id":"hydra-data-provider","title":"Hydra Data Provider"},{"id":"hydra-schema-analyzer","title":"Hydra Schema Analyzer"}]},{"id":"openapi","title":"OpenAPI","anchors":[{"id":"openapiadmin","title":"OpenApiAdmin","anchors":[{"id":"openapiadmin-props","title":"OpenApiAdmin Props"}]},{"id":"open-api-data-provider","title":"Open API Data Provider"},{"id":"open-api-schema-analyzer","title":"Open API Schema Analyzer"}]},{"id":"other-components","title":"Other Components","anchors":[{"id":"fieldguesser","title":"FieldGuesser","anchors":[{"id":"fieldguesser-props","title":"FieldGuesser Props"}]},{"id":"inputguesser","title":"InputGuesser","anchors":[{"id":"inputguesser-props","title":"InputGuesser Props"}]}]}]}]},{"title":"Create Client","path":"create-client","items":[{"id":"index","title":"API Platform Create Client","anchors":[{"id":"generated-react-and-react-native-apps-updated-in-real-time","title":"Generated React and React Native Apps, Updated in Real Time"},{"id":"features","title":"Features"}]},{"id":"nextjs","title":"Next.js Generator","anchors":[{"id":"install","title":"Install"},{"id":"generating-routes","title":"Generating Routes"},{"id":"starting-the-project","title":"Starting the Project"},{"id":"screenshots","title":"Screenshots"}]},{"id":"nuxtjs","title":"Nuxt.js Generator","anchors":[{"id":"install","title":"Install","anchors":[{"id":"nuxt","title":"Nuxt"},{"id":"installing-the-generator-dependencies","title":"Installing the Generator Dependencies"}]},{"id":"updating-nuxt-config","title":"Updating Nuxt Config"},{"id":"generating-routes","title":"Generating Routes"},{"id":"updating-default-layout","title":"Updating Default Layout"},{"id":"starting-the-project","title":"Starting the Project"},{"id":"screenshots","title":"Screenshots"}]},{"id":"vuetify","title":"Vuetify Generator","anchors":[{"id":"install-with-docker","title":"Install With Docker"},{"id":"install-without-docker","title":"Install Without Docker"},{"id":"generating-the-vuejs-web-app","title":"Generating the VueJS Web App"}]},{"id":"quasar","title":"Quasar Framework Generator"},{"id":"react","title":"React Generator","anchors":[{"id":"install","title":"Install"},{"id":"generating-a-web-app","title":"Generating a Web App"},{"id":"screenshots","title":"Screenshots"}]},{"id":"react-native","title":"React Native generator","anchors":[{"id":"install","title":"Install"},{"id":"generating-a-native-app","title":"Generating a Native App"},{"id":"screenshots-in-ios-simulator","title":"Screenshots in iOS Simulator"}]},{"id":"vuejs","title":"Vue.js Generator"},{"id":"typescript","title":"TypeScript Interfaces","anchors":[{"id":"example","title":"Example"}]},{"id":"custom","title":"Custom Generator","anchors":[{"id":"usage","title":"Usage"},{"id":"example","title":"Example","anchors":[{"id":"generator","title":"Generator"},{"id":"template","title":"Template"}]}]},{"id":"troubleshooting","title":"Troubleshooting","anchors":[{"id":"self-signed-tls-certificate","title":"Self-Signed TLS Certificate"},{"id":"authenticated-api","title":"Authenticated API"},{"id":"apidocumentation-doesnt-exist","title":"ApiDocumentation doesn't exist"},{"id":"cannot-read-property-type","title":"Cannot read property '@type'"},{"id":"dereferencing-a-url-did-not-result-in-a-json-object","title":"Dereferencing a URL did not result in a JSON object"},{"id":"docker-distribution-on-windows-and-hot-reloading","title":"Docker distribution on Windows and hot-reloading"}]}]},{"title":"Deployment","path":"deployment","items":[{"id":"index","title":"Deploying API Platform Applications"},{"id":"docker-compose","title":"Deploying with Docker Compose","anchors":[{"id":"preparing-a-server","title":"Preparing a Server"},{"id":"configuring-a-domain-name","title":"Configuring a Domain Name"},{"id":"deploying","title":"Deploying"},{"id":"deploying-on-multiple-nodes","title":"Deploying on Multiple Nodes"}]},{"id":"kubernetes","title":"Deploying to a Kubernetes Cluster","anchors":[{"id":"preparing-your-cluster-and-your-local-machine","title":"Preparing Your Cluster and Your Local Machine"},{"id":"creating-and-publishing-the-docker-images","title":"Creating and Publishing the Docker Images","anchors":[{"id":"example-with-the-google-container-registry-and-google-cloud-platform","title":"Example with the Google Container Registry and Google Cloud Platform","anchors":[{"id":"1-build-the-php-and-caddy-docker-images-and-tag-them","title":"1. Build the PHP and Caddy Docker images and tag them"},{"id":"2-push-your-images-to-your-docker-registry","title":"2. Push your images to your Docker registry"}]}]},{"id":"deploying-with-helm-3","title":"Deploying with Helm 3","anchors":[{"id":"1-check-the-helm-version","title":"1. Check the Helm version"},{"id":"2-firstly-you-need-to-update-helm-dependencies-by-running","title":"2. Firstly you need to update helm dependencies by running"},{"id":"3-optional-if-you-made-changes-to-the-helm-chart-check-if-its-format-is-correct","title":"3. Optional: If you made changes to the Helm chart, check if its format is correct"},{"id":"4-deploy-your-api-to-the-container","title":"4. Deploy your API to the container"}]},{"id":"access-the-container","title":"Access the container"},{"id":"caution-for-system-architecture","title":"Caution for system architecture"},{"id":"updates","title":"Updates","anchors":[{"id":"1-always-version-your-images-recommended","title":"1. Always version your images (recommended)"},{"id":"2-use-latest-tags","title":"2. Use :latest tags"}]},{"id":"github-actions-example-for-deployment","title":"GitHub Actions Example for deployment"},{"id":"symfony-messenger","title":"Symfony Messenger"}]},{"id":"minikube","title":"Deploying to Minikube","anchors":[{"id":"install-minikube","title":"Install Minikube"},{"id":"building-and-pushing-docker-images","title":"Building and Pushing Docker Images"},{"id":"deploying","title":"Deploying"}]},{"id":"heroku","title":"Deploying an API Platform App on Heroku"},{"id":"traefik","title":"Implement Trfik Into API Platform Dockerized","anchors":[{"id":"basic-implementation","title":"Basic Implementation"},{"id":"known-issues","title":"Known Issues"},{"id":"going-further","title":"Going Further"},{"id":"multiple-instances","title":"Multiple Instances"},{"id":"more-generic-approach","title":"More Generic Approach"}]}]},{"title":"General Information","path":"extra","items":[{"id":"philosophy","title":"API Platform's Philosophy"},{"id":"releases","title":"The Release Process"},{"id":"enterprise","title":"API Platform for Enterprise","anchors":[{"id":"enterprise-ready-open-source-softwaremanaged-for-you","title":"Enterprise-ready open source softwaremanaged for you"}]},{"id":"security","title":"Security Policy","anchors":[{"id":"reporting-a-security-issue","title":"Reporting a Security Issue"},{"id":"resolving-process","title":"Resolving Process"},{"id":"security-updates-with-tidelift","title":"Security Updates With Tidelift"},{"id":"issue-severity","title":"Issue Severity","anchors":[{"id":"attack-complexity","title":"Attack Complexity"},{"id":"impact","title":"Impact"},{"id":"affected-projects","title":"Affected Projects"},{"id":"score-totals","title":"Score Totals"},{"id":"severity-levels","title":"Severity levels"}]},{"id":"credits","title":"Credits"}]},{"id":"troubleshooting","title":"Troubleshooting","anchors":[{"id":"using-docker","title":"Using Docker","anchors":[{"id":"with-docker-toolbox-on-windows","title":"With Docker Toolbox on Windows"},{"id":"error-starting-the-web-server","title":"Error Starting The Web Server"}]},{"id":"using-api-platform-and-jms-serializer-in-the-same-project","title":"Using API Platform and JMS Serializer in the same project"},{"id":"upstream-sent-too-big-header-while-reading-response-header-from-upstream-nginx-502-error","title":"\"upstream sent too big header while reading response header from upstream\" NGINX 502 Error"}]},{"id":"contribution-guides","title":"Contribution guides"},{"id":"conduct","title":"Contributor Code of Conduct","anchors":[{"id":"our-pledge","title":"Our Pledge"},{"id":"our-standards","title":"Our Standards"},{"id":"our-responsibilities","title":"Our Responsibilities"},{"id":"scope","title":"Scope"},{"id":"enforcement","title":"Enforcement"},{"id":"attribution","title":"Attribution"}]}]}]},"next":{"slug":"/docs/main/core/state-providers/","title":"State Providers"},"prefixedVersion":"main","previous":{"slug":"/docs/main/core/operations/","title":"Operations"},"title":"GraphQL Support","urlEditDocumentation":"https://github.com/api-platform/docs/edit/main/core/graphql.md","version":"main/"}},"staticQueryHashes":["1552981879"]}